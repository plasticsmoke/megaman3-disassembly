bank $18
org $A000

  db $28, $30, $50, $70, $01, $90, $0D, $00 ; $188000 |
  db $AF, $8D, $88, $12, $28, $C0, $16, $CA ; $18A008 |
  db $8A, $8D, $0E, $01, $BF, $EB, $02, $00 ; $18A010 |
  db $CA, $17, $17, $17, $17, $00, $C0, $26 ; $18A018 |
  db $C2, $AD, $C4, $0A, $C5, $32, $0A, $FE ; $18A020 |
  db $05, $01, $11, $06, $C8, $07, $0C, $08 ; $18A028 |
  db $26, $18, $80, $09, $03, $00, $03, $8A ; $18A030 |
  db $8D, $04, $48, $2D, $0D, $28, $2F, $4F ; $18A038 |
  db $02, $8F, $00, $01, $AF, $8D, $D1, $0D ; $18A040 |
  db $00, $8A, $8D, $01, $2D, $0D, $28, $30 ; $18A048 |
  db $50, $70, $01, $90, $0D, $00, $AF, $8D ; $18A050 |
  db $88, $12, $28, $C0, $64, $CA, $8A, $8D ; $18A058 |
  db $0E, $01, $C0, $39, $05, $00, $CC, $AA ; $18A060 |
  db $05, $00, $88, $AD, $05, $00, $66, $AF ; $18A068 |
  db $04, $48, $06, $64, $08, $11, $05, $01 ; $18A070 |
  db $11, $2F, $0D, $28, $31, $51, $02, $01 ; $18A078 |
  db $91, $0D, $00, $6A, $6D, $71, $01, $2D ; $18A080 |
  db $0D, $28, $2F, $4F, $01, $8F, $0D, $00 ; $18A088 |
  db $8D, $6C, $02, $8D, $12, $08, $C0, $AF ; $18A090 |
  db $8A, $6A, $8C, $6C, $0D, $28, $01, $2B ; $18A098 |
  db $2D, $4D, $02, $01, $8D, $0D, $00, $8C ; $18A0A0 |
  db $6A, $02, $8C, $0E, $01, $C0, $70, $01 ; $18A0A8 |
  db $2F, $0D, $28, $31, $51, $01, $71, $0D ; $18A0B0 |
  db $00, $71, $8F, $01, $6F, $0D, $28, $01 ; $18A0B8 |
  db $B1, $0D, $00, $09, $02, $08, $20, $6A ; $18A0C0 |
  db $6D, $71, $6F, $6D, $6C, $08, $11, $04 ; $18A0C8 |
  db $48, $09, $03, $2F, $0D, $28, $31, $51 ; $18A0D0 |
  db $02, $01, $91, $0D, $00, $6A, $6D, $71 ; $18A0D8 |
  db $01, $2D, $0D, $28, $2F, $4F, $01, $8F ; $18A0E0 |
  db $0D, $00, $8D, $6C, $02, $8D, $12, $08 ; $18A0E8 |
  db $C1, $09, $8A, $6A, $8C, $6C, $0D, $28 ; $18A0F0 |
  db $01, $2B, $2D, $4D, $02, $01, $8D, $0D ; $18A0F8 |
  db $00, $8C, $6A, $02, $8C, $0E, $01, $C0 ; $18A100 |
  db $CF, $09, $02, $01, $34, $0D, $28, $36 ; $18A108 |
  db $56, $01, $76, $76, $98, $78, $09, $03 ; $18A110 |
  db $01, $CD, $01, $8D, $0D, $00, $09, $02 ; $18A118 |
  db $08, $27, $00, $26, $2A, $2D, $00, $01 ; $18A120 |
  db $51, $02, $01, $D1, $02, $80, $04, $00 ; $18A128 |
  db $08, $11, $18, $80, $09, $03, $05, $01 ; $18A130 |
  db $11, $04, $00, $A0, $60, $76, $79, $7B ; $18A138 |
  db $00, $5B, $0D, $3C, $00, $9C, $02, $9B ; $18A140 |
  db $00, $03, $88, $86, $12, $28, $C1, $83 ; $18A148 |
  db $0D, $00, $00, $A5, $60, $00, $86, $88 ; $18A150 |
  db $00, $85, $61, $02, $81, $00, $40, $00 ; $18A158 |
  db $61, $63, $0D, $3C, $A4, $60, $00, $86 ; $18A160 |
  db $88, $0D, $00, $00, $83, $03, $77, $02 ; $18A168 |
  db $97, $00, $40, $00, $74, $77, $B9, $60 ; $18A170 |
  db $79, $7B, $79, $98, $75, $B1, $60, $0E ; $18A178 |
  db $01, $C1, $39, $00, $A5, $60, $00, $86 ; $18A180 |
  db $88, $0D, $00, $00, $8A, $66, $02, $83 ; $18A188 |
  db $00, $40, $00, $03, $76, $78, $B9, $60 ; $18A190 |
  db $79, $7B, $79, $98, $96, $94, $98, $02 ; $18A198 |
  db $D6, $80, $7D, $7E, $04, $40, $3E, $0D ; $18A1A0 |
  db $28, $03, $28, $48, $01, $68, $0D, $00 ; $18A1A8 |
  db $68, $88, $88, $02, $88, $86, $85, $83 ; $18A1B0 |
  db $03, $98, $79, $98, $96, $B4, $02, $80 ; $18A1B8 |
  db $12, $00, $C1, $CA, $7D, $7E, $0E, $01 ; $18A1C0 |
  db $C1, $A4, $03, $68, $69, $01, $29, $0D ; $18A1C8 |
  db $28, $2B, $4B, $01, $6B, $0D, $00, $6B ; $18A1D0 |
  db $8B, $8B, $02, $8B, $89, $88, $86, $83 ; $18A1D8 |
  db $64, $83, $03, $97, $02, $99, $99, $9B ; $18A1E0 |
  db $9C, $D7, $80, $01, $03, $29, $0D, $28 ; $18A1E8 |
  db $2B, $4B, $01, $6B, $0D, $00, $89, $88 ; $18A1F0 |
  db $A6, $60, $66, $68, $66, $C5, $A0, $60 ; $18A1F8 |
  db $03, $76, $79, $7B, $00, $5B, $0D, $3C ; $18A200 |
  db $00, $9C, $02, $9B, $00, $03, $88, $86 ; $18A208 |
  db $0D, $00, $00, $A5, $60, $00, $86, $88 ; $18A210 |
  db $00, $8A, $66, $02, $83, $00, $40, $00 ; $18A218 |
  db $03, $76, $78, $B9, $60, $79, $7B, $79 ; $18A220 |
  db $98, $96, $94, $98, $D6, $09, $01, $08 ; $18A228 |
  db $1C, $03, $71, $71, $6F, $91, $09, $02 ; $18A230 |
  db $6A, $72, $71, $04, $08, $08, $20, $B2 ; $18A238 |
  db $60, $08, $1C, $6A, $72, $71, $08, $20 ; $18A240 |
  db $B2, $60, $08, $1C, $68, $72, $71, $94 ; $18A248 |
  db $72, $92, $91, $6F, $6F, $12, $08, $C2 ; $18A250 |
  db $63, $6D, $6F, $91, $68, $72, $71, $0E ; $18A258 |
  db $01, $C2, $3B, $71, $6A, $88, $08, $1C ; $18A260 |
  db $66, $66, $65, $08, $20, $A5, $60, $08 ; $18A268 |
  db $1C, $66, $66, $65, $08, $20, $A5, $60 ; $18A270 |
  db $65, $6A, $6C, $AF, $8D, $6C, $AD, $02 ; $18A278 |
  db $80, $6D, $6F, $B1, $60, $6D, $6D, $6F ; $18A280 |
  db $91, $8F, $91, $92, $8F, $05, $01, $00 ; $18A288 |
  db $8C, $05, $00, $F0, $8C, $05, $00, $DF ; $18A290 |
  db $88, $05, $00, $CC, $88, $05, $00, $BD ; $18A298 |
  db $85, $05, $00, $88, $86, $05, $00, $44 ; $18A2A0 |
  db $88, $16, $C1, $2E, $17, $06, $64, $07 ; $18A2A8 |
  db $0C, $08, $20, $18, $80, $09, $01, $00 ; $18A2B0 |
  db $A0, $00, $E0, $E0, $E0, $E0, $04, $08 ; $18A2B8 |
  db $AA, $60, $71, $6D, $A8, $A0, $60, $12 ; $18A2C0 |
  db $08, $C2, $D8, $86, $66, $88, $68, $02 ; $18A2C8 |
  db $AA, $66, $02, $88, $0E, $01, $C2, $BE ; $18A2D0 |
  db $8D, $6D, $8C, $6C, $01, $CD, $01, $8D ; $18A2D8 |
  db $04, $08, $AA, $60, $71, $6D, $A8, $A0 ; $18A2E0 |
  db $60, $12, $08, $C2, $FA, $86, $66, $88 ; $18A2E8 |
  db $68, $02, $AA, $66, $02, $88, $0E, $01 ; $18A2F0 |
  db $C2, $E0, $8D, $6D, $8F, $6F, $01, $D1 ; $18A2F8 |
  db $01, $91, $E0, $04, $00, $18, $40, $04 ; $18A300 |
  db $00, $96, $99, $9D, $99, $95, $98, $9D ; $18A308 |
  db $98, $94, $97, $99, $9D, $12, $00, $C3 ; $18A310 |
  db $31, $92, $96, $99, $9D, $92, $95, $99 ; $18A318 |
  db $9C, $90, $94, $97, $9B, $8F, $92, $96 ; $18A320 |
  db $99, $91, $95, $98, $95, $0E, $01, $C3 ; $18A328 |
  db $07, $93, $96, $99, $9D, $92, $96, $99 ; $18A330 |
  db $9D, $94, $98, $9B, $9D, $8A, $8E, $91 ; $18A338 |
  db $96, $9A, $9D, $03, $8A, $8E, $04, $00 ; $18A340 |
  db $8F, $92, $96, $99, $8F, $94, $98, $94 ; $18A348 |
  db $8D, $91, $94, $91, $8D, $91, $94, $91 ; $18A350 |
  db $0E, $01, $C3, $46, $92, $95, $99, $9C ; $18A358 |
  db $8B, $8F, $92, $95, $90, $94, $97, $9B ; $18A360 |
  db $93, $96, $99, $9C, $92, $95, $99, $9C ; $18A368 |
  db $92, $95, $99, $9C, $99, $9E, $03, $88 ; $18A370 |
  db $86, $81, $85, $88, $85, $03, $96, $99 ; $18A378 |
  db $9D, $99, $95, $98, $9D, $98, $94, $97 ; $18A380 |
  db $99, $9D, $93, $96, $99, $9D, $92, $96 ; $18A388 |
  db $99, $9D, $94, $98, $9B, $9D, $8A, $8E ; $18A390 |
  db $91, $96, $08, $1C, $03, $76, $76, $76 ; $18A398 |
  db $01, $76, $01, $B6, $18, $80, $04, $00 ; $18A3A0 |
  db $08, $20, $6F, $72, $76, $79, $7B, $7E ; $18A3A8 |
  db $03, $6A, $66, $03, $74, $78, $7B, $7E ; $18A3B0 |
  db $03, $68, $6C, $6F, $6C, $03, $6D, $71 ; $18A3B8 |
  db $74, $78, $79, $7D, $03, $68, $6D, $71 ; $18A3C0 |
  db $6D, $68, $65, $61, $03, $76, $72, $71 ; $18A3C8 |
  db $0E, $01, $C3, $A6, $04, $00, $71, $75 ; $18A3D0 |
  db $78, $7B, $7E, $7B, $78, $75, $0E, $01 ; $18A3D8 |
  db $C3, $D4, $76, $79, $7D, $79, $74, $78 ; $18A3E0 |
  db $7B, $78, $72, $76, $79, $7D, $7E, $03 ; $18A3E8 |
  db $6A, $6D, $71, $18, $40, $03, $8F, $92 ; $18A3F0 |
  db $96, $99, $8F, $92, $96, $99, $94, $98 ; $18A3F8 |
  db $9B, $9E, $94, $98, $9B, $9E, $16, $C3 ; $18A400 |
  db $03, $17, $06, $B4, $08, $00, $09, $03 ; $18A408 |
  db $00, $A0, $00, $E0, $E0, $E0, $E0, $01 ; $18A410 |
  db $AA, $02, $01, $8A, $01, $C5, $01, $65 ; $18A418 |
  db $02, $86, $02, $88, $02, $AA, $A8, $01 ; $18A420 |
  db $A6, $02, $01, $86, $01, $C5, $01, $65 ; $18A428 |
  db $02, $86, $02, $88, $AA, $8A, $91, $88 ; $18A430 |
  db $01, $A6, $02, $01, $86, $01, $C5, $01 ; $18A438 |
  db $65, $02, $86, $02, $88, $02, $AA, $A8 ; $18A440 |
  db $01, $A6, $02, $01, $86, $01, $C5, $01 ; $18A448 |
  db $65, $02, $83, $02, $85, $01, $C6, $01 ; $18A450 |
  db $86, $C0, $80, $88, $8D, $8C, $04, $40 ; $18A458 |
  db $AA, $01, $6A, $6A, $6D, $6A, $02, $A9 ; $18A460 |
  db $89, $01, $A8, $01, $68, $68, $6D, $68 ; $18A468 |
  db $02, $A6, $86, $01, $A6, $01, $66, $69 ; $18A470 |
  db $68, $66, $02, $A4, $84, $01, $A3, $01 ; $18A478 |
  db $63, $63, $68, $66, $02, $A5, $65, $68 ; $18A480 |
  db $04, $40, $AA, $01, $6A, $6A, $6D, $6A ; $18A488 |
  db $02, $A9, $89, $01, $A8, $01, $68, $68 ; $18A490 |
  db $6D, $68, $02, $A7, $87, $01, $A6, $01 ; $18A498 |
  db $66, $66, $6D, $66, $A8, $8D, $8C, $01 ; $18A4A0 |
  db $CA, $01, $8A, $6E, $6F, $71, $70, $71 ; $18A4A8 |
  db $68, $13, $00, $C4, $F2, $04, $40, $A3 ; $18A4B0 |
  db $01, $63, $63, $65, $66, $02, $A8, $68 ; $18A4B8 |
  db $6A, $01, $A1, $01, $61, $81, $61, $C1 ; $18A4C0 |
  db $0E, $01, $C4, $B5, $01, $A6, $01, $66 ; $18A4C8 |
  db $66, $68, $69, $02, $AB, $6B, $69, $02 ; $18A4D0 |
  db $A4, $64, $66, $02, $A7, $6B, $69, $02 ; $18A4D8 |
  db $A6, $6B, $6D, $8B, $02, $A6, $01, $A8 ; $18A4E0 |
  db $01, $68, $68, $6B, $6C, $CD, $0F, $01 ; $18A4E8 |
  db $C4, $88, $04, $40, $A3, $01, $63, $63 ; $18A4F0 |
  db $65, $66, $02, $A8, $68, $6A, $01, $A1 ; $18A4F8 |
  db $01, $61, $81, $61, $02, $A1, $61, $63 ; $18A500 |
  db $0E, $01, $C4, $F2, $01, $A5, $01, $65 ; $18A508 |
  db $65, $66, $68, $01, $A5, $01, $65, $65 ; $18A510 |
  db $6D, $6C, $AA, $A8, $02, $A6, $66, $65 ; $18A518 |
  db $02, $A3, $83, $01, $A3, $01, $63, $63 ; $18A520 |
  db $65, $66, $A8, $AA, $AC, $AF, $16, $C4 ; $18A528 |
  db $5E, $17, $17, $06, $02, $6F, $03, $0A ; $18A530 |
  db $1F, $35, $40, $0F, $90, $08, $41, $1D ; $18A538 |
  db $31, $0F, $2A, $7F, $10, $02, $82, $02 ; $18A540 |
  db $0A, $00, $41, $00, $10, $FF, $14, $02 ; $18A548 |
  db $FF, $03, $02, $07, $28, $C0, $0F, $3E ; $18A550 |
  db $02, $FF, $03, $02, $00, $40, $02, $FF ; $18A558 |
  db $03, $02, $00, $42, $02, $FF, $03, $02 ; $18A560 |
  db $00, $43, $02, $FF, $03, $02, $00, $45 ; $18A568 |
  db $02, $FF, $03, $02, $00, $47, $02, $FF ; $18A570 |
  db $03, $02, $00, $49, $02, $FF, $03, $02 ; $18A578 |
  db $00, $4A, $02, $FF, $03, $02, $04, $08 ; $18A580 |
  db $3E, $02, $FF, $03, $02, $00, $40, $02 ; $18A588 |
  db $FF, $03, $02, $00, $42, $02, $FF, $03 ; $18A590 |
  db $02, $00, $43, $02, $FF, $03, $02, $00 ; $18A598 |
  db $45, $02, $FF, $03, $02, $00, $47, $02 ; $18A5A0 |
  db $FF, $03, $02, $00, $49, $02, $FF, $03 ; $18A5A8 |
  db $02, $00, $4A, $FF, $07, $02, $EB, $0A ; $18A5B0 |
  db $02, $0F, $36, $40, $0F, $FF, $33, $FF ; $18A5B8 |
  db $10, $02, $6F, $03, $0A, $0F, $2C, $C0 ; $18A5C0 |
  db $0F, $40, $14, $0D, $2D, $0F, $7F, $06 ; $18A5C8 |
  db $02, $FF, $0B, $0A, $0D, $2F, $08, $7F ; $18A5D0 |
  db $30, $09, $2E, $FF, $07, $FF, $15, $02 ; $18A5D8 |
  db $FF, $0E, $03, $0F, $2A, $80, $0F, $7F ; $18A5E0 |
  db $3E, $0F, $2A, $40, $0F, $7F, $3E, $02 ; $18A5E8 |
  db $FF, $0E, $03, $04, $0C, $3E, $04, $0C ; $18A5F0 |
  db $3E, $02, $FF, $0E, $03, $04, $09, $3E ; $18A5F8 |
  db $04, $09, $3E, $02, $FF, $0E, $03, $04 ; $18A600 |
  db $06, $3E, $04, $06, $3E, $02, $FF, $0E ; $18A608 |
  db $03, $04, $03, $3E, $04, $03, $3E, $02 ; $18A610 |
  db $FF, $0E, $03, $04, $01, $3E, $04, $01 ; $18A618 |
  db $3E, $FF, $09, $02, $C8, $1C, $08, $0D ; $18A620 |
  db $32, $0F, $FF, $0E, $FF, $09, $02, $FF ; $18A628 |
  db $04, $06, $07, $28, $00, $0F, $52, $0D ; $18A630 |
  db $28, $AF, $00, $5E, $FF, $15, $02, $FF ; $18A638 |
  db $04, $02, $07, $28, $80, $0F, $2E, $02 ; $18A640 |
  db $FF, $04, $02, $00, $29, $02, $FF, $04 ; $18A648 |
  db $02, $00, $26, $02, $FF, $04, $02, $00 ; $18A650 |
  db $3A, $FF, $02, $02, $FF, $05, $02, $07 ; $18A658 |
  db $28, $C0, $0F, $39, $02, $FF, $08, $02 ; $18A660 |
  db $02, $40, $32, $FF, $09, $02, $FF, $04 ; $18A668 |
  db $03, $07, $29, $40, $0F, $3D, $07, $29 ; $18A670 |
  db $40, $0F, $41, $01, $02, $C6, $6D, $00 ; $18A678 |
  db $00, $FF, $08, $02, $FF, $02, $0A, $0F ; $18A680 |
  db $2C, $80, $0F, $6E, $59, $0D, $3C, $0F ; $18A688 |
  db $4A, $09, $02, $FF, $04, $00, $03, $02 ; $18A690 |
  db $C6, $83, $FF, $02, $0A, $0F, $2C, $80 ; $18A698 |
  db $0F, $6E, $59, $0D, $3C, $0F, $4A, $09 ; $18A6A0 |
  db $FF, $08, $02, $51, $05, $0E, $0F, $01 ; $18A6A8 |
  db $80, $0F, $7F, $33, $0D, $31, $FF, $7F ; $18A6B0 |
  db $3D, $0D, $28, $0F, $FF, $04, $02, $51 ; $18A6B8 |
  db $05, $04, $04, $00, $34, $FF, $08, $02 ; $18A6C0 |
  db $FF, $04, $08, $0D, $28, $0F, $7F, $06 ; $18A6C8 |
  db $02, $FF, $16, $08, $08, $3C, $10, $FF ; $18A6D0 |
  db $08, $02, $51, $08, $0C, $0D, $31, $FF ; $18A6D8 |
  db $7F, $38, $0D, $28, $0F, $FF, $04, $02 ; $18A6E0 |
  db $EB, $06, $06, $0F, $2C, $80, $0F, $7F ; $18A6E8 |
  db $21, $0D, $2C, $FF, $FF, $2D, $FF, $08 ; $18A6F0 |
  db $02, $FF, $07, $04, $05, $29, $9F, $5F ; $18A6F8 |
  db $02, $FF, $07, $04, $04, $00, $5F, $02 ; $18A700 |
  db $FF, $07, $04, $04, $00, $5F, $FF, $08 ; $18A708 |
  db $02, $FF, $07, $0E, $0F, $2C, $C0, $0F ; $18A710 |
  db $7F, $28, $0D, $2B, $8C, $7F, $5F, $0D ; $18A718 |
  db $32, $0F, $7F, $10, $02, $FF, $03, $0E ; $18A720 |
  db $08, $FF, $4E, $0C, $00, $FF, $5F, $08 ; $18A728 |
  db $FF, $10, $FF, $08, $02, $FF, $2F, $0E ; $18A730 |
  db $0F, $28, $80, $0F, $87, $21, $0D, $28 ; $18A738 |
  db $FF, $87, $2D, $0D, $28, $0F, $88, $0C ; $18A740 |
  db $FF, $07, $02, $FF, $1E, $0C, $05, $34 ; $18A748 |
  db $FF, $2F, $05, $28, $0F, $01, $FF, $08 ; $18A750 |
  db $02, $FF, $0C, $06, $1F, $32, $80, $0F ; $18A758 |
  db $FF, $FF, $53, $05, $32, $74, $5F, $FF ; $18A760 |
  db $09, $02, $FF, $06, $0A, $05, $32, $0F ; $18A768 |
  db $47, $05, $32, $0C, $06, $FF, $11, $02 ; $18A770 |
  db $96, $05, $08, $05, $28, $0F, $03, $02 ; $18A778 |
  db $28, $28, $08, $09, $30, $AA, $03, $FF ; $18A780 |
  db $08, $02, $FF, $0A, $06, $17, $3B, $00 ; $18A788 |
  db $0F, $07, $58, $05, $3B, $FF, $4C, $02 ; $18A790 |
  db $FF, $0A, $06, $00, $58, $04, $00, $4C ; $18A798 |
  db $FF, $11, $02, $EB, $08, $08, $05, $2F ; $18A7A0 |
  db $0F, $03, $02, $EB, $00, $08, $00, $03 ; $18A7A8 |
  db $02, $EB, $08, $08, $00, $03, $02, $EB ; $18A7B0 |
  db $08, $08, $00, $03, $02, $EB, $08, $08 ; $18A7B8 |
  db $00, $03, $02, $EB, $08, $08, $00, $03 ; $18A7C0 |
  db $02, $EB, $08, $08, $00, $03, $02, $EB ; $18A7C8 |
  db $08, $08, $00, $03, $02, $EB, $08, $08 ; $18A7D0 |
  db $00, $03, $02, $EB, $08, $08, $00, $03 ; $18A7D8 |
  db $02, $EB, $08, $08, $00, $03, $02, $EB ; $18A7E0 |
  db $08, $08, $00, $03, $FF, $07, $02, $AB ; $18A7E8 |
  db $03, $0A, $05, $33, $0F, $19, $05, $33 ; $18A7F0 |
  db $0F, $08, $02, $A9, $25, $08, $09, $38 ; $18A7F8 |
  db $2C, $0D, $FF, $07, $02, $FF, $17, $0A ; $18A800 |
  db $17, $29, $00, $06, $02, $2D, $0D, $32 ; $18A808 |
  db $0F, $01, $0D, $FF, $07, $02, $BF, $04 ; $18A810 |
  db $08, $05, $2E, $0F, $0A, $03, $02, $C8 ; $18A818 |
  db $15, $01, $01, $00, $FF, $09, $02, $96 ; $18A820 |
  db $04, $08, $05, $32, $0F, $09, $02, $B4 ; $18A828 |
  db $04, $08, $01, $28, $09, $01, $01, $C8 ; $18A830 |
  db $26, $00, $00, $FF, $07, $02, $FF, $1B ; $18A838 |
  db $0A, $0D, $32, $0F, $88, $40, $0D, $32 ; $18A840 |
  db $0F, $98, $07, $FF, $07, $02, $6E, $04 ; $18A848 |
  db $0A, $0F, $2C, $00, $0F, $A1, $24, $0D ; $18A850 |
  db $30, $0F, $93, $07, $02, $28, $28, $08 ; $18A858 |
  db $09, $37, $9C, $02, $FF, $08, $02, $FF ; $18A860 |
  db $10, $0E, $0D, $35, $0F, $63, $44, $0D ; $18A868 |
  db $28, $E6, $7F, $38, $0D, $32, $0F, $2E ; $18A870 |
  db $03, $02, $FF, $0A, $0E, $04, $05, $58 ; $18A878 |
  db $04, $A1, $31, $04, $05, $03, $FF, $08 ; $18A880 |
  db $02, $FF, $03, $02, $0F, $3A, $80, $0F ; $18A888 |
  db $FF, $4F, $02, $05, $1D, $02, $01, $37 ; $18A890 |
  db $54, $FF, $08, $02, $E1, $32, $02, $0F ; $18A898 |
  db $39, $80, $0F, $8F, $3E, $FF, $00, $C8 ; $18A8A0 |
  db $AF, $C8, $EE, $C9, $37, $C9, $7E, $05 ; $18A8A8 |
  db $02, $00, $06, $C8, $07, $0C, $08, $06 ; $18A8B0 |
  db $09, $01, $18, $40, $03, $AD, $60, $6D ; $18A8B8 |
  db $6C, $6D, $8F, $91, $92, $8F, $B1, $B4 ; $18A8C0 |
  db $B6, $B3, $09, $01, $08, $00, $07, $0A ; $18A8C8 |
  db $65, $65, $60, $68, $68, $60, $6A, $6A ; $18A8D0 |
  db $60, $6C, $6C, $60, $6F, $60, $70, $60 ; $18A8D8 |
  db $71, $71, $74, $73, $6F, $71, $60, $71 ; $18A8E0 |
  db $74, $73, $6F, $02, $71, $17, $06, $C8 ; $18A8E8 |
  db $07, $0A, $08, $06, $09, $02, $18, $40 ; $18A8F0 |
  db $76, $71, $6F, $6A, $60, $6A, $74, $76 ; $18A8F8 |
  db $98, $99, $9B, $98, $79, $79, $60, $79 ; $18A900 |
  db $79, $79, $60, $79, $7B, $7B, $60, $7B ; $18A908 |
  db $7B, $7B, $60, $7B, $0C, $FE, $08, $00 ; $18A910 |
  db $7D, $7D, $60, $03, $68, $68, $60, $6A ; $18A918 |
  db $6A, $60, $6C, $6C, $60, $6F, $60, $70 ; $18A920 |
  db $60, $65, $65, $68, $67, $63, $65, $60 ; $18A928 |
  db $65, $68, $67, $63, $02, $65, $17, $06 ; $18A930 |
  db $C8, $08, $00, $09, $03, $6A, $6A, $6A ; $18A938 |
  db $6A, $A0, $08, $0E, $06, $E6, $79, $79 ; $18A940 |
  db $96, $79, $79, $96, $08, $00, $06, $C8 ; $18A948 |
  db $6D, $60, $6D, $6D, $6D, $60, $6D, $6D ; $18A950 |
  db $6F, $60, $6F, $6F, $6F, $60, $6F, $6F ; $18A958 |
  db $65, $65, $60, $68, $68, $60, $6A, $6A ; $18A960 |
  db $60, $6C, $6C, $60, $6F, $60, $70, $60 ; $18A968 |
  db $71, $71, $74, $73, $6F, $71, $60, $71 ; $18A970 |
  db $74, $73, $6F, $02, $71, $17, $06, $C8 ; $18A978 |
  db $07, $0A, $08, $0C, $6C, $6C, $6C, $6C ; $18A980 |
  db $02, $C0, $04, $00, $65, $6D, $6C, $6D ; $18A988 |
  db $6A, $6D, $6C, $6D, $0E, $01, $C9, $8A ; $18A990 |
  db $04, $00, $6C, $6C, $60, $0E, $03, $C9 ; $18A998 |
  db $98, $6C, $60, $6C, $60, $6C, $6C, $6C ; $18A9A0 |
  db $6C, $6C, $6C, $60, $6C, $6C, $6C, $6C ; $18A9A8 |
  db $6C, $80, $17, $01, $02, $FF, $06, $0A ; $18A9B0 |
  db $0F, $39, $C0, $0F, $FF, $40, $0D, $39 ; $18A9B8 |
  db $06, $7F, $10, $02, $FF, $01, $02, $00 ; $18A9C0 |
  db $48, $FF, $00, $C9, $D3, $CA, $4B, $CA ; $18A9C8 |
  db $C7, $CB, $2B, $0A, $FD, $05, $02, $00 ; $18A9D0 |
  db $07, $0C, $18, $C0, $04, $08, $04, $08 ; $18A9D8 |
  db $09, $01, $08, $1D, $06, $C8, $02, $B1 ; $18A9E0 |
  db $6F, $6D, $02, $AF, $6D, $6C, $02, $AD ; $18A9E8 |
  db $6C, $6A, $8C, $8A, $88, $8A, $6A, $60 ; $18A9F0 |
  db $71, $6F, $02, $01, $D1, $08, $01, $06 ; $18A9F8 |
  db $F5, $01, $F1, $0E, $01, $C9, $DE, $04 ; $18AA00 |
  db $08, $06, $C8, $08, $1D, $02, $AA, $6A ; $18AA08 |
  db $71, $8F, $8D, $8C, $8D, $AA, $02, $8C ; $18AA10 |
  db $6D, $6C, $60, $02, $AA, $12, $08, $CA ; $18AA18 |
  db $35, $02, $AA, $6A, $71, $94, $92, $91 ; $18AA20 |
  db $8F, $B1, $02, $92, $74, $72, $60, $02 ; $18AA28 |
  db $B1, $0E, $01, $CA, $07, $09, $02, $02 ; $18AA30 |
  db $AA, $6C, $6D, $8C, $8A, $88, $85, $AA ; $18AA38 |
  db $02, $8C, $6D, $6C, $60, $02, $AA, $16 ; $18AA40 |
  db $C9, $DC, $17, $06, $C8, $07, $0C, $08 ; $18AA48 |
  db $06, $09, $02, $04, $00, $04, $00, $04 ; $18AA50 |
  db $00, $96, $99, $98, $99, $0E, $05, $CA ; $18AA58 |
  db $57, $76, $79, $78, $76, $7E, $79, $76 ; $18AA60 |
  db $03, $68, $63, $03, $78, $03, $6A, $65 ; $18AA68 |
  db $61, $6D, $6C, $68, $0F, $01, $CA, $55 ; $18AA70 |
  db $04, $00, $0C, $00, $09, $01, $9E, $9B ; $18AA78 |
  db $9D, $9E, $03, $89, $85, $87, $89, $0C ; $18AA80 |
  db $FE, $AA, $02, $8C, $6D, $6C, $60, $02 ; $18AA88 |
  db $AA, $12, $08, $CA, $AD, $0C, $00, $86 ; $18AA90 |
  db $83, $85, $86, $8C, $89, $8A, $8C, $B1 ; $18AA98 |
  db $0C, $FE, $02, $92, $74, $72, $60, $02 ; $18AAA0 |
  db $B1, $0E, $01, $CA, $78, $0C, $00, $09 ; $18AAA8 |
  db $02, $8A, $86, $88, $8A, $8C, $88, $8A ; $18AAB0 |
  db $8C, $0C, $FE, $AA, $02, $8C, $6D, $6C ; $18AAB8 |
  db $60, $02, $AA, $16, $CA, $53, $17, $06 ; $18AAC0 |
  db $C8, $08, $00, $09, $03, $04, $00, $04 ; $18AAC8 |
  db $00, $04, $00, $6A, $60, $6A, $6A, $0E ; $18AAD0 |
  db $07, $CA, $D1, $04, $00, $66, $60, $66 ; $18AAD8 |
  db $66, $0E, $06, $CA, $DB, $68, $60, $68 ; $18AAE0 |
  db $68, $0F, $01, $CA, $CF, $04, $00, $63 ; $18AAE8 |
  db $60, $63, $63, $63, $60, $63, $63, $65 ; $18AAF0 |
  db $60, $65, $65, $65, $60, $65, $65, $04 ; $18AAF8 |
  db $00, $6A, $60, $6A, $6A, $0E, $03, $CA ; $18AB00 |
  db $FF, $0F, $02, $CA, $ED, $66, $60, $66 ; $18AB08 |
  db $66, $66, $60, $66, $66, $68, $60, $68 ; $18AB10 |
  db $68, $68, $60, $68, $68, $04, $00, $6A ; $18AB18 |
  db $60, $6A, $6A, $0E, $03, $CB, $1D, $16 ; $18AB20 |
  db $CA, $CD, $17, $04, $00, $04, $00, $08 ; $18AB28 |
  db $0C, $07, $08, $06, $C8, $65, $6C, $08 ; $18AB30 |
  db $03, $06, $F0, $8D, $08, $0C, $06, $C8 ; $18AB38 |
  db $6A, $6C, $08, $03, $06, $F0, $8D, $0E ; $18AB40 |
  db $0F, $CB, $2D, $04, $00, $08, $0C, $6D ; $18AB48 |
  db $6D, $6D, $6D, $68, $6D, $6D, $6D, $0E ; $18AB50 |
  db $0E, $CB, $4B, $65, $6C, $68, $65, $6C ; $18AB58 |
  db $68, $65, $6C, $16, $CB, $2B, $17, $00 ; $18AB60 |
  db $CB, $70, $CB, $F6, $CC, $7B, $CC, $CB ; $18AB68 |
  db $0A, $03, $05, $02, $00, $06, $D2, $07 ; $18AB70 |
  db $0A, $08, $16, $09, $01, $18, $40, $83 ; $18AB78 |
  db $86, $89, $8C, $89, $86, $8F, $92, $95 ; $18AB80 |
  db $98, $95, $92, $9B, $9E, $03, $89, $8C ; $18AB88 |
  db $89, $86, $8F, $92, $95, $98, $95, $92 ; $18AB90 |
  db $04, $08, $06, $78, $07, $0A, $6F, $70 ; $18AB98 |
  db $0E, $0B, $CB, $98, $08, $06, $06, $96 ; $18ABA0 |
  db $07, $0C, $09, $02, $03, $96, $76, $79 ; $18ABA8 |
  db $96, $03, $88, $86, $85, $84, $83, $81 ; $18ABB0 |
  db $83, $81, $03, $96, $96, $76, $79, $96 ; $18ABB8 |
  db $9C, $9B, $99, $9B, $99, $96, $02, $B6 ; $18ABC0 |
  db $03, $8A, $6A, $68, $8A, $8D, $8C, $88 ; $18ABC8 |
  db $88, $86, $85, $83, $85, $81, $03, $96 ; $18ABD0 |
  db $9C, $9B, $99, $98, $94, $96, $99, $9D ; $18ABD8 |
  db $08, $22, $01, $03, $AA, $07, $0A, $AA ; $18ABE0 |
  db $07, $08, $AA, $07, $06, $AA, $07, $04 ; $18ABE8 |
  db $AA, $07, $02, $01, $AA, $17, $06, $D2 ; $18ABF0 |
  db $07, $0A, $08, $16, $09, $01, $0C, $01 ; $18ABF8 |
  db $18, $40, $83, $86, $89, $8C, $89, $86 ; $18AC00 |
  db $8F, $92, $95, $98, $95, $92, $9B, $9E ; $18AC08 |
  db $03, $89, $8C, $89, $86, $8F, $92, $95 ; $18AC10 |
  db $98, $95, $92, $09, $02, $08, $01, $0C ; $18AC18 |
  db $00, $07, $08, $06, $FA, $02, $03, $B6 ; $18AC20 |
  db $02, $B0, $02, $B1, $02, $A9, $08, $06 ; $18AC28 |
  db $06, $96, $04, $00, $07, $0C, $8A, $6D ; $18AC30 |
  db $6F, $90, $0E, $02, $CC, $32, $8F, $8D ; $18AC38 |
  db $8A, $04, $00, $8A, $6D, $6C, $8A, $0E ; $18AC40 |
  db $02, $CC, $41, $8F, $8D, $8C, $04, $00 ; $18AC48 |
  db $8A, $6D, $6F, $90, $0E, $03, $CC, $4E ; $18AC50 |
  db $0C, $02, $96, $9C, $9B, $99, $98, $94 ; $18AC58 |
  db $96, $99, $9D, $08, $22, $09, $01, $01 ; $18AC60 |
  db $03, $AA, $07, $0A, $AA, $07, $08, $AA ; $18AC68 |
  db $07, $06, $AA, $07, $04, $AA, $07, $02 ; $18AC70 |
  db $01, $AA, $17, $06, $C8, $08, $00, $09 ; $18AC78 |
  db $03, $04, $00, $63, $60, $63, $63, $63 ; $18AC80 |
  db $60, $0E, $07, $CC, $81, $09, $02, $08 ; $18AC88 |
  db $01, $06, $FA, $02, $B6, $02, $B0, $02 ; $18AC90 |
  db $B1, $02, $A9, $09, $03, $06, $C8, $08 ; $18AC98 |
  db $00, $8A, $8A, $8A, $8A, $8A, $8A, $86 ; $18ACA0 |
  db $86, $86, $86, $86, $86, $83, $83, $83 ; $18ACA8 |
  db $88, $88, $88, $04, $00, $8A, $0E, $0B ; $18ACB0 |
  db $CC, $B3, $86, $86, $86, $86, $86, $86 ; $18ACB8 |
  db $8A, $90, $8F, $8D, $8C, $88, $8A, $8D ; $18ACC0 |
  db $91, $96, $17, $06, $FF, $07, $0C, $08 ; $18ACC8 |
  db $09, $02, $CF, $02, $CC, $02, $C8, $02 ; $18ACD0 |
  db $C5, $E0, $C0, $04, $00, $08, $0C, $06 ; $18ACD8 |
  db $C8, $07, $0A, $6C, $60, $6C, $6C, $6C ; $18ACE0 |
  db $60, $0E, $06, $CC, $DB, $6C, $6C, $6C ; $18ACE8 |
  db $6C, $6C, $6C, $04, $00, $6C, $60, $6C ; $18ACF0 |
  db $6C, $6C, $60, $0E, $05, $CC, $F3, $6C ; $18ACF8 |
  db $6C, $6C, $6C, $6C, $6C, $08, $09, $06 ; $18AD00 |
  db $FF, $07, $0C, $01, $A8, $07, $0A, $A8 ; $18AD08 |
  db $07, $08, $A8, $07, $06, $A8, $07, $04 ; $18AD10 |
  db $A8, $07, $02, $01, $A8, $17, $00, $CD ; $18AD18 |
  db $27, $CD, $5C, $CD, $90, $CD, $BE, $05 ; $18AD20 |
  db $02, $00, $06, $C8, $07, $0C, $08, $00 ; $18AD28 |
  db $09, $01, $18, $40, $7B, $7F, $03, $6A ; $18AD30 |
  db $6E, $60, $6C, $60, $6A, $6C, $60, $6A ; $18AD38 |
  db $60, $67, $02, $8A, $66, $6A, $6D, $71 ; $18AD40 |
  db $60, $6F, $60, $6D, $6F, $60, $6D, $60 ; $18AD48 |
  db $6C, $6D, $6C, $68, $70, $70, $60, $72 ; $18AD50 |
  db $72, $60, $F4, $17, $06, $C8, $07, $0C ; $18AD58 |
  db $08, $00, $18, $40, $09, $01, $73, $76 ; $18AD60 |
  db $7A, $7D, $60, $7B, $60, $7A, $7B, $60 ; $18AD68 |
  db $7A, $60, $76, $02, $9A, $76, $79, $7D ; $18AD70 |
  db $03, $68, $60, $66, $60, $65, $66, $60 ; $18AD78 |
  db $65, $60, $63, $65, $63, $03, $78, $03 ; $18AD80 |
  db $6D, $6D, $60, $6F, $6F, $60, $F1, $17 ; $18AD88 |
  db $06, $C8, $08, $00, $09, $02, $7B, $7B ; $18AD90 |
  db $7B, $7B, $60, $7B, $60, $7B, $7B, $60 ; $18AD98 |
  db $7B, $60, $7B, $02, $9B, $79, $79, $79 ; $18ADA0 |
  db $79, $60, $79, $60, $79, $03, $68, $60 ; $18ADA8 |
  db $68, $60, $68, $68, $68, $68, $69, $69 ; $18ADB0 |
  db $60, $6B, $6B, $60, $ED, $17, $17, $00 ; $18ADB8 |
  db $CD, $C8, $CD, $E9, $CE, $05, $CE, $3B ; $18ADC0 |
  db $0A, $06, $05, $02, $2E, $06, $7D, $07 ; $18ADC8 |
  db $0C, $08, $00, $18, $C0, $C0, $03, $70 ; $18ADD0 |
  db $70, $6F, $70, $C0, $06, $96, $70, $72 ; $18ADD8 |
  db $60, $01, $74, $D4, $08, $01, $01, $D4 ; $18ADE0 |
  db $17, $06, $7D, $07, $0C, $08, $00, $18 ; $18ADE8 |
  db $40, $C0, $03, $6D, $6D, $6C, $6D, $C0 ; $18ADF0 |
  db $6D, $6F, $60, $06, $96, $01, $71, $D1 ; $18ADF8 |
  db $08, $01, $01, $D1, $17, $06, $C8, $08 ; $18AE00 |
  db $0E, $09, $02, $00, $78, $76, $74, $00 ; $18AE08 |
  db $03, $88, $00, $03, $78, $76, $74, $00 ; $18AE10 |
  db $03, $88, $08, $00, $69, $69, $68, $69 ; $18AE18 |
  db $08, $0E, $06, $E6, $09, $02, $68, $68 ; $18AE20 |
  db $82, $68, $68, $81, $08, $00, $69, $6B ; $18AE28 |
  db $60, $06, $96, $01, $6D, $CD, $08, $01 ; $18AE30 |
  db $01, $CD, $17, $17, $00, $00, $00, $00 ; $18AE38 |
  db $20, $00, $24, $40, $11, $00, $30, $00 ; $18AE40 |
  db $00, $00, $00, $00, $01, $00, $84, $00 ; $18AE48 |
  db $00, $40, $00, $00, $80, $80, $20, $00 ; $18AE50 |
  db $12, $00, $00, $00, $00, $00, $00, $04 ; $18AE58 |
  db $00, $00, $04, $00, $22, $00, $00, $00 ; $18AE60 |
  db $00, $00, $08, $00, $00, $01, $00, $00 ; $18AE68 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AE70 |
  db $00, $00, $00, $00, $80, $00, $00, $00 ; $18AE78 |
  db $48, $01, $00, $00, $10, $00, $01, $00 ; $18AE80 |
  db $20, $40, $00, $00, $10, $00, $02, $00 ; $18AE88 |
  db $00, $00, $00, $04, $00, $00, $04, $40 ; $18AE90 |
  db $82, $00, $00, $00, $1A, $04, $40, $00 ; $18AE98 |
  db $C2, $01, $08, $00, $00, $00, $00, $10 ; $18AEA0 |
  db $00, $00, $80, $00, $00, $00, $00, $00 ; $18AEA8 |
  db $00, $00, $00, $00, $00, $00, $00, $04 ; $18AEB0 |
  db $00, $00, $00, $00, $14, $00, $00, $00 ; $18AEB8 |
  db $40, $04, $00, $40, $10, $00, $80, $01 ; $18AEC0 |
  db $20, $00, $00, $00, $44, $00, $00, $00 ; $18AEC8 |
  db $00, $00, $40, $10, $00, $00, $00, $00 ; $18AED0 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AED8 |
  db $00, $00, $44, $40, $00, $00, $08, $10 ; $18AEE0 |
  db $50, $00, $02, $00, $04, $00, $00, $00 ; $18AEE8 |
  db $00, $00, $00, $00, $00, $00, $80, $00 ; $18AEF0 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AEF8 |
  db $00, $00, $20, $00, $00, $04, $21, $00 ; $18AF00 |
  db $00, $00, $00, $00, $00, $00, $00, $04 ; $18AF08 |
  db $00, $40, $00, $00, $08, $00, $20, $00 ; $18AF10 |
  db $00, $00, $80, $00, $04, $44, $50, $00 ; $18AF18 |
  db $10, $00, $00, $00, $00, $00, $00, $00 ; $18AF20 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AF28 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AF30 |
  db $00, $00, $00, $00, $00, $00, $40, $00 ; $18AF38 |
  db $80, $00, $00, $04, $00, $00, $34, $00 ; $18AF40 |
  db $01, $10, $21, $00, $80, $00, $00, $00 ; $18AF48 |
  db $00, $00, $00, $00, $80, $00, $02, $00 ; $18AF50 |
  db $00, $00, $00, $00, $09, $00, $80, $00 ; $18AF58 |
  db $12, $00, $08, $00, $40, $10, $01, $01 ; $18AF60 |
  db $02, $00, $00, $00, $40, $00, $00, $00 ; $18AF68 |
  db $00, $00, $10, $00, $00, $00, $00, $00 ; $18AF70 |
  db $20, $00, $00, $00, $00, $00, $00, $00 ; $18AF78 |
  db $00, $10, $01, $14, $00, $00, $00, $00 ; $18AF80 |
  db $00, $00, $04, $00, $00, $00, $00, $00 ; $18AF88 |
  db $00, $00, $08, $40, $00, $00, $01, $00 ; $18AF90 |
  db $00, $00, $44, $00, $00, $00, $02, $00 ; $18AF98 |
  db $50, $00, $00, $00, $00, $00, $02, $00 ; $18AFA0 |
  db $80, $00, $00, $00, $04, $00, $00, $00 ; $18AFA8 |
  db $00, $00, $00, $00, $08, $00, $10, $00 ; $18AFB0 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AFB8 |
  db $00, $00, $00, $00, $08, $00, $00, $00 ; $18AFC0 |
  db $00, $00, $04, $00, $00, $04, $00, $00 ; $18AFC8 |
  db $00, $40, $01, $10, $00, $00, $00, $00 ; $18AFD0 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AFD8 |
  db $02, $00, $00, $00, $00, $00, $00, $00 ; $18AFE0 |
  db $00, $00, $80, $40, $80, $40, $00, $00 ; $18AFE8 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $18AFF0 |
  db $00, $00, $00, $00, $00, $00, $00, $10 ; $18AFF8 |

org $9000
  JMP robot_master_intro                           ; $189000 |

  JMP code_18985D                           ; $189003 |

  JMP code_189ABE                           ; $189006 |

  JSR fade_palette_in                           ; $189009 |
  JSR task_yield                           ; $18900C |
  JSR rendering_off                           ; $18900F |
  LDY #$05                                  ; $189012 |
code_189014:
  LDA $9BF7,y                               ; $189014 |
  STA $00E8,y                               ; $189017 |
  DEY                                       ; $18901A |
  BPL code_189014                           ; $18901B |
  JSR select_CHR_banks.reset_flag           ; $18901D |
  LDA #$20                                  ; $189020 |
  LDX #$24                                  ; $189022 |
  LDY #$00                                  ; $189024 |
  JSR fill_nametable                           ; $189026 |
  JSR rendering_on                           ; $189029 |
  LDY #$1F                                  ; $18902C |
code_18902E:
  LDA $9C03,y                               ; $18902E |
  STA $0620,y                               ; $189031 |
  DEY                                       ; $189034 |
  BPL code_18902E                           ; $189035 |
  LDA #$00                                  ; $189037 |
  STA $10                                   ; $189039 |
  LDX #$10                                  ; $18903B |
  JSR write_ppu_data_from_bank03                           ; $18903D |
  JSR task_yield                           ; $189040 |
  LDX #$11                                  ; $189043 |
  JSR write_ppu_data_from_bank03                           ; $189045 |
  JSR task_yield                           ; $189048 |
  JSR fade_palette_out                           ; $18904B |
  LDX #$B4                                  ; $18904E |
  JSR task_yield_x                           ; $189050 |
  JSR fade_palette_in                           ; $189053 |
  JSR task_yield                           ; $189056 |
  JSR rendering_off                           ; $189059 |
  LDY #$05                                  ; $18905C |
code_18905E:
  LDA $9BF7,y                               ; $18905E |
  STA $00E8,y                               ; $189061 |
  DEY                                       ; $189064 |
  BPL code_18905E                           ; $189065 |
  JSR select_CHR_banks.reset_flag           ; $189067 |
  LDA #$13                                  ; $18906A |
  STA $F5                                   ; $18906C |
  JSR select_PRG_banks                      ; $18906E |
  LDA #$00                                  ; $189071 |
  STA $28                                   ; $189073 |
code_189075:
  LDY #$00                                  ; $189075 |
  STY $10                                   ; $189077 |
  JSR queue_metatile_update                           ; $189079 |
  JSR drain_ppu_buffer                           ; $18907C |
  JSR task_yield                           ; $18907F |
  INC $28                                   ; $189082 |
  LDA $28                                   ; $189084 |
  AND #$3F                                  ; $189086 |
  BNE code_189075                           ; $189088 |
  LDY #$1F                                  ; $18908A |
code_18908C:
  LDA $9C03,y                               ; $18908C |
  STA $0620,y                               ; $18908F |
  DEY                                       ; $189092 |
  BPL code_18908C                           ; $189093 |
  JSR task_yield                           ; $189095 |
  JSR rendering_on                           ; $189098 |
  LDX #$03                                  ; $18909B |
code_18909D:
  LDA $9C69,x                               ; $18909D |
  STA $0200,x                               ; $1890A0 |
  DEX                                       ; $1890A3 |
  BPL code_18909D                           ; $1890A4 |
  LDA #$00                                  ; $1890A6 |
  STA $EE                                   ; $1890A8 |
  LDA #$13                                  ; $1890AA |
  STA $F5                                   ; $1890AC |
  JSR select_PRG_banks                      ; $1890AE |
  JSR fade_palette_out                           ; $1890B1 |
code_1890B4:
  LDA $14                                   ; $1890B4 |
  AND #$10                                  ; $1890B6 |
  BNE stage_select_init                           ; $1890B8 |
  LDA $14                                   ; $1890BA |
  AND #$0C                                  ; $1890BC |
  BEQ code_1890CA                           ; $1890BE |
  LSR                                       ; $1890C0 |
  LSR                                       ; $1890C1 |
  LSR                                       ; $1890C2 |
  TAY                                       ; $1890C3 |
  LDA $9BFF,y                               ; $1890C4 |
  STA $0200                                 ; $1890C7 |
code_1890CA:
  JSR task_yield                           ; $1890CA |
  JMP code_1890B4                           ; $1890CD |

; --- stage_select_init ($1890D0) ---
; Entry point for the stage select screen. Sets up CHR banks, loads palettes,
; and determines if this is a fresh start or return from a stage.
;
; Palette system:
;   $0600-$060F = BG palette buffer (4 sub-palettes × 4 colors)
;   $0610-$061F = Sprite palette buffer (4 sub-palettes × 4 colors)
;   $0620-$062F = BG palette working copy
;   $18 = palette update flag (nonzero → NMI uploads $0600-$061F to PPU $3F00-$3F1F)
;
; Fresh start ($0F=0): BG palettes from $9C33, sprite palettes from $9C23
;   BG 0: $0F $20 $21 $11 — frame borders: black, white, lt blue, dk blue
;   BG 1: $0F $20 $37 $29 — portrait face BG: black, white, tan, green
;   BG 2: $0F $20 $26 $16 — portrait face detail: black, white, salmon, dk red
;   BG 3: $0F $20 $10 $21 — text/misc: black, white, grey, lt blue
;   SP 0: $0F $30 $15 $11 — cursor bolts + center portrait: transparent, white, dk magenta, dk blue
;   SP 1: $0F $37 $21 $10 — face sprites 1: black, tan, lt blue, grey
;   SP 2: $0F $37 $26 $15 — face sprites 2: black, tan, salmon, dk magenta
;   SP 3: $0F $37 $26 $0F — face sprites 3: black, tan, salmon, black
;
; Return from stage ($0F=1): BG palettes from $9C43
stage_select_init:
  LDA #$36                                  ; $1890D0 | CHR bank $36 for sprite tiles
  STA $EC                                   ; $1890D2 |
  LDA #$34                                  ; $1890D4 | CHR bank $34 for BG tiles
  STA $ED                                   ; $1890D6 |
  JSR select_CHR_banks.reset_flag           ; $1890D8 | apply CHR bank selection
; Load sprite palettes from $9C23 ($9C23)
  LDY #$0F                                  ; $1890DB | counter = 16 bytes
.load_sprite_palette:
  LDA $9C23,y                 ; $1890DD | load sprite palette color
  STA $0610,y                               ; $1890E0 | store to sprite palette buffer
  DEY                                       ; $1890E3 |
  BPL .load_sprite_palette                  ; $1890E4 | loop Y=$0F down to $00
  STY $18                                   ; $1890E6 | Y=$FF, trigger palette update
; Determine fresh start vs return: check if OAM is initialized
  LDY #$00                                  ; $1890E8 | assume fresh start (Y=0)
  LDA $0200                                 ; $1890EA | check OAM sprite 0 Y position
  CMP #$97                                  ; $1890ED | $97 = sentinel for uninitialized
  BEQ .set_mode                             ; $1890EF | fresh start → Y stays 0
  INY                                       ; $1890F1 | returning from stage → Y=1
.set_mode:
  STY $0F                                   ; $1890F2 | $0F = 0 (fresh) or 1 (return)
  LDA $9BFD,y                               ; $1890F4 | select music track
  JSR submit_sound_ID_D9                    ; $1890F7 | play stage select music
  LDA #$00                                  ; $1890FA |
  STA $70                                   ; $1890FC | clear NMI sync flag
  LDA $9C63,y                               ; $1890FE | load screen scroll/setup param
  JSR code_1FE8B4                           ; $189101 |
  LDA #$04                                  ; $189104 |
  STA $97                                   ; $189106 |
  JSR prepare_oam_buffer                           ; $189108 | clear unused OAM sprites
.wait_nmi:
  LDA #$04                                  ; $18910B |
  STA $10                                   ; $18910D |
  JSR fill_nametable_progressive                           ; $18910F |
  JSR task_yield                           ; $189112 | wait for NMI
  LDA $70                                   ; $189115 |
  BNE .wait_nmi                             ; $189117 | loop until NMI complete
; Load BG palettes — offset depends on fresh start vs return
  LDY $0F                                   ; $189119 | Y = 0 (fresh) or 1 (return)
  BEQ .load_bg_palette                      ; $18911B | skip portrait restore if fresh
  LDA #$04                                  ; $18911D |
  STA $10                                   ; $18911F |
  LDX #$00                                  ; $189121 |
  JSR write_ppu_data_from_bank03                           ; $189123 | restore defeated boss portraits
.load_bg_palette:
  LDA $9C65,y                               ; $189126 | load scroll params
  STA $10                                   ; $189129 |
  LDA $9C67,y                               ; $18912B |
  STA $11                                   ; $18912E |
  JSR rendering_off                           ; $189130 | enable PPU rendering
  LDX $9C01,y                    ; $189133 | X = offset into $9C03
  LDY #$00                                  ; $189136 |
.load_bg_palette_loop:
  LDA $9C03,x                     ; $189138 | load BG palette color
  STA $0600,y                               ; $18913B | store to BG palette buffer
  STA $0620,y                               ; $18913E | store to working copy
  INX                                       ; $189141 |
  INY                                       ; $189142 |
  CPY #$10                                  ; $189143 | 16 bytes = 4 palettes × 4 colors
  BNE .load_bg_palette_loop                 ; $189145 |
  STY $18                                   ; $189147 | Y=$10, trigger palette update
  LDA #$20                                  ; $189149 |
  LDX #$24                                  ; $18914B |
  LDY #$00                                  ; $18914D |
  JSR fill_nametable                           ; $18914F |
  JSR rendering_on                           ; $189152 |
code_189155:
  LDA #$F8                                  ; $189155 |
  STA $0200                                 ; $189157 |
  INC $EE                                   ; $18915A |
  LDA #$58                                  ; $18915C |
  STA $5E                                   ; $18915E |
  LDA #$07                                  ; $189160 |
  STA $F8                                   ; $189162 |
code_189164:
  LDA $FC                                   ; $189164 |
  CLC                                       ; $189166 |
  ADC $10                                   ; $189167 |
  STA $FC                                   ; $189169 |
  LDA $FD                                   ; $18916B |
  ADC $11                                   ; $18916D |
  AND #$01                                  ; $18916F |
  STA $FD                                   ; $189171 |
  LDA #$00                                  ; $189173 |
  STA $EE                                   ; $189175 |
  JSR task_yield                           ; $189177 |
  INC $EE                                   ; $18917A |
  LDA $FC                                   ; $18917C |
  BNE code_189164                           ; $18917E |
  LDY #$10                                  ; $189180 |
  LDA $11                                   ; $189182 |
  BMI code_1891C8                           ; $189184 |
  LDA $FD                                   ; $189186 |
  EOR #$01                                  ; $189188 |
  ASL                                       ; $18918A |
  ASL                                       ; $18918B |
  STA $10                                   ; $18918C |
  LDA #$01                                  ; $18918E |
  JSR code_1FE8B4                           ; $189190 |
  LDA #$00                                  ; $189193 |
  STA $70                                   ; $189195 |
  STA $EE                                   ; $189197 |
code_189199:
  LDA $10                                   ; $189199 |
  PHA                                       ; $18919B |
  JSR fill_nametable_progressive                           ; $18919C |
  PLA                                       ; $18919F |
  STA $10                                   ; $1891A0 |
  JSR task_yield                           ; $1891A2 |
  LDA $70                                   ; $1891A5 |
  BNE code_189199                           ; $1891A7 |
  JSR code_18995C                           ; $1891A9 |
  LDX #$03                                  ; $1891AC |
  JSR write_ppu_data_from_bank03                           ; $1891AE |
  JSR task_yield                           ; $1891B1 |
  LDX #$04                                  ; $1891B4 |
  JSR write_ppu_data_from_bank03                           ; $1891B6 |
  LDA $FD                                   ; $1891B9 |
  EOR #$01                                  ; $1891BB |
  STA $FD                                   ; $1891BD |
  LDY #$00                                  ; $1891BF |
  LDA #$7E                                  ; $1891C1 |
  STA $E9                                   ; $1891C3 |
  JSR update_CHR_banks                      ; $1891C5 |
code_1891C8:
  LDX #$00                                  ; $1891C8 |
code_1891CA:
  LDA $9C33,y                               ; $1891CA |
  STA $0600,x                               ; $1891CD |
  INY                                       ; $1891D0 |
  INX                                       ; $1891D1 |
  CPX #$10                                  ; $1891D2 |
  BNE code_1891CA                           ; $1891D4 |
  LDA #$FF                                  ; $1891D6 |
  STA $18                                   ; $1891D8 |
  LDA #$01                                  ; $1891DA |
  STA $12                                   ; $1891DC |
  LDA #$03                                  ; $1891DE |
  STA $13                                   ; $1891E0 |
  LDA $11                                   ; $1891E2 |
  BMI code_1891EC                           ; $1891E4 |
  JSR code_1899FA                           ; $1891E6 |
  JMP code_189258                           ; $1891E9 |

code_1891EC:
  JSR code_1893E9                           ; $1891EC |
code_1891EF:
  JSR code_1893FE                           ; $1891EF |
  LDA #$00                                  ; $1891F2 |
  STA $EE                                   ; $1891F4 |
  JSR task_yield                           ; $1891F6 |
  INC $EE                                   ; $1891F9 |
  LDA $14                                   ; $1891FB |
  AND #$10                                  ; $1891FD |
  BEQ code_1891EF                           ; $1891FF |
  LDA $0200                                 ; $189201 |
  CMP #$B7                                  ; $189204 |
  BEQ code_189212                           ; $189206 |
  LDA #$03                                  ; $189208 |
  STA $F5                                   ; $18920A |
  JSR select_PRG_banks                      ; $18920C |
  JMP $A593                                 ; $18920F |

code_189212:
  LDY #$04                                  ; $189212 |
  LDA #$F8                                  ; $189214 |
code_189216:
  STA $0200,y                               ; $189216 |
  INY                                       ; $189219 |
  INY                                       ; $18921A |
  INY                                       ; $18921B |
  INY                                       ; $18921C |
  BNE code_189216                           ; $18921D |
  LDA #$13                                  ; $18921F |
  STA $F5                                   ; $189221 |
  JSR select_PRG_banks                      ; $189223 |
  LDA #$10                                  ; $189226 |
  JSR submit_sound_ID_D9                    ; $189228 |
  LDA #$00                                  ; $18922B |
  STA $70                                   ; $18922D |
  STA $28                                   ; $18922F |
  LDA #$04                                  ; $189231 |
  JSR code_1FE8B4                           ; $189233 |
code_189236:
  LDA #$00                                  ; $189236 |
  STA $EE                                   ; $189238 |
  STA $10                                   ; $18923A |
  JSR fill_nametable_progressive                           ; $18923C |
  JSR task_yield                           ; $18923F |
  LDA $70                                   ; $189242 |
  BNE code_189236                           ; $189244 |
  LDA #$04                                  ; $189246 |
  STA $10                                   ; $189248 |
  LDA #$00                                  ; $18924A |
  STA $11                                   ; $18924C |
  LDA #$7C                                  ; $18924E |
  STA $E8                                   ; $189250 |
  JSR update_CHR_banks                      ; $189252 |
  JMP code_189155                           ; $189255 |

code_189258:
  LDA $14                                   ; $189258 |
  AND #$90                                  ; $18925A |
  BEQ code_189261                           ; $18925C |
  JMP stage_select_confirm                           ; $18925E |

; ==========================================================================
; STAGE SELECT SCREEN
; ==========================================================================
; The stage select screen displays a 3×3 grid of boss portraits with
; Mega Man's face in the center. The player moves a cursor between the
; 9 grid positions using the D-pad.
;
; Grid layout:
;   Spark Man ($06) | Snake Man ($05) | Needle Man ($00)
;   Hard Man ($03)  | Mega Man (ctr)  | Top Man ($04)
;   Gemini Man ($02)| Magnet Man ($01)| Shadow Man ($07)
;
; Visual composition:
;   Background tiles: Blue "MEGA MAN" repeating pattern, portrait frame
;     borders (8×6 tiles per frame), boss name text labels, "PUSH START"
;   Nametable writes: Portrait face tiles (4×4 per boss, CHR bank selects face),
;     center Mega Man face tiles ($CC-$FF)
;   OAM sprites: Cursor bolt connectors (4 per selected frame, tiles $E4/$E5,
;     sprite palette 0: $0F/$30/$15/$11 — attribute byte never written, defaults
;     to $00 from OAM clear. Tile $E4 = magenta fill ($15), tile $E5 = blue fill
;     ($11), both with white ($30) upper-left highlight. Alternates every 8 frames.
;     Mega Man eye sprites (6 per cursor position, attr $03 = sprite palette 3,
;     eyes track toward selected boss), boss portrait detail sprites
;
; Key data tables in this bank:
;   $9C75: megaman_eye_sprites — 9 × 12 bytes (6 sprites × tile+attr)
;   $9CE1: stage_select_lookup — grid index → stage $22 value
;   $9CF3: cursor_pos_y — bolt sprite Y base per grid position
;   $9CFC: cursor_pos_x — bolt sprite X base per grid position
;   $9D05: cursor_bolt_offset_y — Y offsets for 4 bolt corners
;   $9D09: cursor_bolt_offset_x — X offsets for 4 bolt corners
;   $9D0D: cursor_direction_offsets — D-pad bit → position delta
;   $9D4C: portrait_addr_lo — PPU nametable low bytes for frame positions
;   $9D55: portrait_addr_hi — PPU nametable high bytes for frame positions
;   $9D5E: portrait_frame_tiles — frame border tile layout (groups)
;   $9D99: face_tiles — 4×4 boss face tile IDs ($C8-$FB)
;   $9DA9: face_attr_offsets — attribute table offsets per portrait
;   $9DB2: center_portrait_data — Mega Man center face tiles ($CC-$FF)
;   $9DC9: face_addr_hi — PPU high bytes for face tile writes
;   $9DD2: face_addr_lo — PPU low bytes for face tile writes
;
; Portrait pixel positions (frame top-left corners):
;   Col 0: x=16   Col 1: x=96   Col 2: x=176
;   Row 0: y=24   Row 1: y=88   Row 2: y=152
;
; Cursor bolt pixel positions (base + offsets):
;   Base Y: row 0=$18(24), row 1=$58(88), row 2=$98(152)
;   Base X: col 0=$17(23), col 1=$67(103), col 2=$B7(183)
;   Offsets: TL(0,0) TR(42,0) BL(0,38) BR(42,38)
;   Bolt tile $E4 = magenta ($15) fill, $E5 = blue ($11) fill, alternates every 8 frames
; ==========================================================================

; --- Stage select d-pad handling ---
; $12 = cursor column (0-2), $13 = cursor row offset (0/3/6)
; Combined ($12+$13) = grid index 0-8 into stage lookup table at $9CE1
code_189261:
  LDA $14                                   ; $189261 | new button presses
  AND #$03                                  ; $189263 | $02=Left, $01=Right
  BEQ code_189279                           ; $189265 | no horizontal input → skip
  TAY                                       ; $189267 |
  LDA $12                                   ; $189268 | current column
  CLC                                       ; $18926A |
  ADC $9D0D,y                               ; $18926B | add direction offset from table
  CMP #$03                                  ; $18926E | clamp to 0-2
  BCS code_189279                           ; $189270 | out of range → ignore
  STA $12                                   ; $189272 | update column
  LDA #$1B                                  ; $189274 | SFX $1B = cursor move
  JSR submit_sound_ID                       ; $189276 |
code_189279:
  LDA $14                                   ; $189279 | new button presses
  AND #$0C                                  ; $18927B | $08=Up, $04=Down
  BEQ code_189291                           ; $18927D | no vertical input → skip
  TAY                                       ; $18927F |
  LDA $13                                   ; $189280 | current row offset
  CLC                                       ; $189282 |
  ADC $9D0D,y                               ; $189283 | add direction offset
  CMP #$07                                  ; $189286 | clamp to 0-6 (rows 0/3/6)
  BCS code_189291                           ; $189288 | out of range → ignore
  STA $13                                   ; $18928A | update row
  LDA #$1B                                  ; $18928C | SFX $1B = cursor move
  JSR submit_sound_ID                       ; $18928E |
code_189291:
  LDA $12                                   ; $189291 | combine column + row
  CLC                                       ; $189293 |
  ADC $13                                   ; $189294 |
  STA $00                                   ; $189296 |
  ASL                                       ; $189298 |
  ASL                                       ; $189299 |
  STA $01                                   ; $18929A |
  ASL                                       ; $18929C |
; --- Cursor sprite rendering ---
; Writes 6 cursor selector sprites + 4 cursor bolt sprites to OAM.
; Grid index = $12 + $13 = $00 (0-8).
  ADC $01                                   ; $18929D | ×12 = OAM data offset for grid pos
  TAX                                       ; $18929F |
  LDY #$00                                  ; $1892A0 |
.copy_selector_sprites:
  LDA $9C75,x                               ; $1892A2 | cursor selector OAM data (12 bytes/pos)
  STA $0299,y                               ; $1892A5 | → OAM sprites at $0298+
  LDA $9C76,x                               ; $1892A8 |
  STA $029A,y                               ; $1892AB |
  INX                                       ; $1892AE |
  INX                                       ; $1892AF |
  INY                                       ; $1892B0 |
  INY                                       ; $1892B1 |
  INY                                       ; $1892B2 |
  INY                                       ; $1892B3 | Y += 4 (OAM entry size)
  CPY #$18                                  ; $1892B4 | 6 sprites × 4 bytes = $18
  BNE .copy_selector_sprites                ; $1892B6 |
; --- Cursor bolt sprites (4 corner bolts) ---
; Position from $9CF3/$9CFC tables, offsets from $9D05/$9D09.
; Bolt tile alternates $E4/$E5 every 8 frames for flash effect.
; NOTE: OAM attribute byte is never written → defaults to $00 = sprite palette 0.
; SP 0: $0F(transparent), $30(white), $15(dk_magenta), $11(dk_blue).
; Tile $E4 uses color 2 ($15 magenta fill), tile $E5 uses color 3 ($11 blue fill).
; Both tiles have color 1 ($30 white) as upper-left highlight.
; Solid filled shape (not outline) — same pattern as center portrait bolt sprites.
  LDY $00                                   ; $1892B8 | grid index
  LDA $9CF3,y                               ; $1892BA | cursor Y base (per grid position)
  STA $00                                   ; $1892BD |
  LDA $9CFC,y                               ; $1892BF | cursor X base (per grid position)
  STA $01                                   ; $1892C2 |
  LDA $95                                   ; $1892C4 | frame counter
  LSR                                       ; $1892C6 |
  LSR                                       ; $1892C7 |
  LSR                                       ; $1892C8 | ÷8
  AND #$01                                  ; $1892C9 | alternates 0/1
  CLC                                       ; $1892CB |
  ADC #$E4                                  ; $1892CC | tile $E4 or $E5 (bolt flash)
  STA $02                                   ; $1892CE |
  LDX #$03                                  ; $1892D0 | 4 bolts (3→0)
  LDY #$C8                                  ; $1892D2 | OAM offset $C8 (sprite 50-53)
.draw_bolt:
  LDA $00                                   ; $1892D4 | Y base
  CLC                                       ; $1892D6 |
  ADC $9D05,x                               ; $1892D7 | + Y offset (0 or 38 for top/bottom)
  STA $0200,y                               ; $1892DA | → OAM Y
  LDA $01                                   ; $1892DD | X base
  CLC                                       ; $1892DF |
  ADC $9D09,x                               ; $1892E0 | + X offset (0 or 42 for left/right)
  STA $0203,y                               ; $1892E3 | → OAM X
  LDA $02                                   ; $1892E6 | bolt tile ($E4/$E5)
  STA $0201,y                               ; $1892E8 | → OAM tile
  DEY                                       ; $1892EB |
  DEY                                       ; $1892EC |
  DEY                                       ; $1892ED |
  DEY                                       ; $1892EE | Y -= 4 (next OAM slot, backwards)
  DEX                                       ; $1892EF |
  BPL .draw_bolt                            ; $1892F0 |
code_1892F2:
  LDA #$00                                  ; $1892F2 |
  STA $EE                                   ; $1892F4 |
  JSR task_yield                           ; $1892F6 |
  INC $EE                                   ; $1892F9 |
  INC $95                                   ; $1892FB |
  JMP code_189258                           ; $1892FD |

; ===========================================================================
; Stage select confirmation (A or Start pressed)
; ===========================================================================
; Called when the player presses A/Start on the stage select screen.
; Validates the selection, then initiates the stage transition:
;   1. Fills the offscreen nametable with boss intro layout (blue band)
;   2. Loads transition palettes from $9C53
;   3. Jumps to bank03 $A000 for the horizontal scroll + boss name reveal
;
; The boss intro layout is a solid light-blue band (NES $21) spanning
; tile rows 11-18 (y=88-151), bordered by white ($20) lines at y=88-89
; and y=150-151. This band is written into the offscreen nametable by
; fill_nametable_progressive ($1FEF8C) using metatile data from bank $13.
; The NMI/IRQ scroll split then creates a 3-strip effect:
;   - Top strip    (y=0-87):    scrolls horizontally, sliding portraits away
;   - Middle band  (y=88-151):  stays fixed, shows blue intro band + boss sprite
;   - Bottom strip (y=152-239): scrolls horizontally, sliding portraits away
; ---------------------------------------------------------------------------
stage_select_confirm:
  JSR clear_entity_table                           ; $189300 | clear all entity slots
  LDA $12                                   ; $189303 | $12 = cursor column (0-2)
  CLC                                       ; $189305 |
  ADC $13                                   ; $189306 | $13 = cursor row offset (0/3/6)
  TAY                                       ; $189308 | Y = grid index (0-8)
  CPY #$04                                  ; $189309 | index 4 = center position
  BNE .validate_boss                        ; $18930B | not center → try select
  LDA $60                                   ; $18930D | center only selectable when
  CMP #$12                                  ; $18930F | $60 == $12 (all Doc Robots beaten)
  BNE .validate_boss                        ; $189311 |
  JMP code_189ABC                           ; $189313 | → Wily fortress entrance

.validate_boss:
  LDA $61                                   ; $189316 | $61 = boss-defeated bitmask
  AND $9DED,y                               ; $189318 | check if this boss already beaten
  BNE code_1892F2                           ; $18931B | already beaten → back to select loop
  LDA $60                                   ; $18931D | $60 = game progression page
  CMP #$0A                                  ; $18931F | >= $0A = invalid state
  BCS code_1892F2                           ; $189321 | → back to select loop
  TYA                                       ; $189323 | Y = grid index (0-8)
  CLC                                       ; $189324 |
  ADC $60                                   ; $189325 | + page offset (0=Robot Masters, $0A=Doc Robot)
  TAY                                       ; $189327 | Y = adjusted grid index for table lookup
; Stage select lookup table at $9CE1 (9 entries per page):
;   Index: 0     1     2     3     4     5     6     7     8
;   Value: $06   $05   $00   $03   $FF   $04   $02   $01   $07
;   Boss:  Spark Snake Needl Hard  (n/a) Top   Gemin Magnt Shadw
;   Grid:  TL    TM    TR    ML    CTR   MR    BL    BM    BR
  LDA $9CE1,y                               ; $189328 | look up stage number
  BMI code_1892F2                           ; $18932B | $FF = center (not selectable)
  STA $22                                   ; $18932D | $22 = current stage number
  STY $0F                                   ; $18932F | $0F = save adjusted grid index

; --- Set up PRG/CHR banks for the boss intro layout ---
  LDA #$13                                  ; $189331 |\ select PRG bank $13
  STA $F5                                   ; $189333 | | (contains boss intro metatile data
  JSR select_PRG_banks                      ; $189335 |/  at $AF00+, referenced by fill routine)
  LDA #$04                                  ; $189338 |\ set rendering mode
  STA $97                                   ; $18933A |/
  JSR prepare_oam_buffer                           ; $18933C | clear unused OAM sprites
  LDA #$76                                  ; $18933F |\ set CHR bank $76
  STA $E9                                   ; $189341 | | (boss intro screen tileset)
  JSR update_CHR_banks                      ; $189343 |/

; --- Determine which nametable to fill (the offscreen one) ---
; $FD bit 0 = currently displayed nametable. Toggle it so the NEW
; nametable becomes visible, then compute $10 = old nametable's
; PPU address bit (0 or 4) to write the intro layout into it first.
  LDA $FD                                   ; $189346 |\ toggle displayed nametable
  PHA                                       ; $189348 | |
  EOR #$01                                  ; $189349 | |
  STA $FD                                   ; $18934B |/
  PLA                                       ; $18934D |\ $10 = OLD nametable select bit
  AND #$01                                  ; $18934E | | bit 0 → shifted left 2 = 0 or 4
  ASL                                       ; $189350 | | 0 = nametable $2000, 4 = nametable $2400
  ASL                                       ; $189351 | |
  STA $10                                   ; $189352 |/

; --- Set up metatile pointer and fill nametable ---
; code_1FE8B4 computes: ($20/$21) = $AF00 + (A << 6)
; A=$03 → column 3 of bank $13 level data → pointer $AFC0
  LDA #$03                                  ; $189354 |\ set metatile column pointer
  JSR code_1FE8B4                           ; $189356 |/ ($20/$21) → $AFC0 in bank $13
  LDA #$00                                  ; $189359 |\ $70 = nametable fill progress (0-63)
  STA $70                                   ; $18935B |/ starts at 0
  STA $EE                                   ; $18935D | $EE = NMI skip flag (0=allow NMI)

; Fill the offscreen nametable progressively.
; fill_nametable_progressive writes 4 tile rows per call.
; 16 calls × 4 rows = 64 rows → full nametable.
; When $70 reaches $40, it writes the attribute table and resets $70 to 0.
.fill_nametable_loop:
  LDA $10                                   ; $18935F |\ preserve nametable select
  PHA                                       ; $189361 |/
  JSR fill_nametable_progressive            ; $189362 | write 4 rows to PPU queue
  JSR task_yield                           ; $189365 | wait for NMI (PPU uploads queued data)
  PLA                                       ; $189368 |\ restore nametable select
  STA $10                                   ; $189369 |/
  LDA $70                                   ; $18936B | $70 = 0 when fill complete
  BNE .fill_nametable_loop                  ; $18936D | loop until done

; --- Load transition palette and jump to bank03 ---
; $9C53: 16-byte palette for the boss intro screen (BG palettes only).
; This replaces the stage select palettes with the intro band colors.
  LDY #$0F                                  ; $18936F |
.load_transition_palette:
  LDA $9C53,y                               ; $189371 | copy 16 bytes from $9C53
  STA $0600,y                               ; $189374 | to BG palette buffer
  STA $0620,y                               ; $189377 | and working copy
  DEY                                       ; $18937A |
  BPL .load_transition_palette              ; $18937B |
  STY $18                                   ; $18937D | $18 = $FF → flag palette upload

; Jump to bank03 entry point.
; Y = adjusted grid index (used by bank03 to index stage parameter tables).
; This is a JMP (not JSR) — bank03's RTS returns to whoever called the
; stage select, not back here.
  LDA #$03                                  ; $18937F |\ select PRG bank $03
  STA $F5                                   ; $189381 | |
  JSR select_PRG_banks                      ; $189383 |/
  LDY $0F                                   ; $189386 | Y = adjusted grid index
  JMP $A000                                 ; $189388 | → bank03 stage_transition_entry

  PHA                                       ; $18938B |
  LDA #$01                                  ; $18938C |
  STA $F5                                   ; $18938E |
  JSR select_PRG_banks                      ; $189390 |
  PLA                                       ; $189393 |
  JSR $A000                                 ; $189394 |
  LDA #$03                                  ; $189397 |
  STA $F5                                   ; $189399 |
  JMP select_PRG_banks                      ; $18939B |

; ---------------------------------------------------------------------------
; write_ppu_data_from_bank03 — copy a PPU write command list from bank03
; ---------------------------------------------------------------------------
; Parameters: X = table index, $10 = nametable select (0 or 4)
; Loads a pointer from bank03 tables $A56D/$A580 and copies the data
; to the PPU write queue at $0780+. The data format is:
;   byte 0: PPU high address (ORed with $10 for nametable select)
;   byte 1: PPU low address
;   byte 2: tile count (N)
;   bytes 3..3+N: tile data
;   ... (repeats for more rows)
;   terminator: high byte with bit 7 set ($FF)
; Used to write nametable tile data for the boss intro screen.
; ---------------------------------------------------------------------------
write_ppu_data_from_bank03:
  STY $04                                   ; $18939E | save Y
  STX $05                                   ; $1893A0 | save table index
  LDA $F5                                   ; $1893A2 |\ save current PRG bank
  PHA                                       ; $1893A4 |/
  LDA #$03                                  ; $1893A5 |\ switch to bank 03
  STA $F5                                   ; $1893A7 | | (contains PPU data tables)
  JSR select_PRG_banks                      ; $1893A9 |/
  LDX $05                                   ; $1893AC | X = table index
  LDA $A56D,x                               ; $1893AE |\ ($02/$03) = pointer to PPU data
  STA $02                                   ; $1893B1 | | low byte from $A56D+X
  LDA $A580,x                               ; $1893B3 | | high byte from $A580+X
  STA $03                                   ; $1893B6 |/
  LDY #$00                                  ; $1893B8 |
.copy_ppu_entry:
  LDA ($02),y                               ; $1893BA | PPU high address
  ORA $10                                   ; $1893BC | OR nametable select bit
  STA $0780,y                               ; $1893BE | store to PPU write queue
  BMI .done                                 ; $1893C1 | bit 7 set = terminator ($FF)
  INY                                       ; $1893C3 |
  LDA ($02),y                               ; $1893C4 | PPU low address
  STA $0780,y                               ; $1893C6 |
  INY                                       ; $1893C9 |
  LDA ($02),y                               ; $1893CA | tile count
  STA $0780,y                               ; $1893CC |
  STA $00                                   ; $1893CF | save count for loop
  INY                                       ; $1893D1 |
.copy_tiles:
  LDA ($02),y                               ; $1893D2 | tile data byte
  STA $0780,y                               ; $1893D4 |
  INY                                       ; $1893D7 |
  DEC $00                                   ; $1893D8 |
  BPL .copy_tiles                           ; $1893DA |
  BMI .copy_ppu_entry                       ; $1893DC | next PPU entry (always branches)
.done:
  STA $19                                   ; $1893DE | $19 = $FF → flag PPU write pending
  PLA                                       ; $1893E0 |\ restore original PRG bank
  STA $F5                                   ; $1893E1 | |
  JSR select_PRG_banks                      ; $1893E3 |/
  LDY $04                                   ; $1893E6 | restore Y
  RTS                                       ; $1893E8 |

code_1893E9:
  LDA #$B7                                  ; $1893E9 |
  STA $0200                                 ; $1893EB |
  LDA #$ED                                  ; $1893EE |
  STA $0201                                 ; $1893F0 |
  LDA #$00                                  ; $1893F3 |
  STA $0202                                 ; $1893F5 |
  LDA #$40                                  ; $1893F8 |
  STA $0203                                 ; $1893FA |
  RTS                                       ; $1893FD |

code_1893FE:
  LDA $14                                   ; $1893FE |
  AND #$0C                                  ; $189400 |
  BEQ code_18940F                           ; $189402 |
  LDY #$B7                                  ; $189404 |
  AND #$08                                  ; $189406 |
  BNE code_18940C                           ; $189408 |
  LDY #$C7                                  ; $18940A |
code_18940C:
  STY $0200                                 ; $18940C |
code_18940F:
  RTS                                       ; $18940F |

; ===========================================================================
; Robot Master stage intro sequence
; ===========================================================================
; Called after bank03 returns from the horizontal scroll + boss name reveal.
; This routine handles:
;   1. Refill HP/weapon energy
;   2. Fill nametable with boss intro layout (blue band screen)
;   3. Write stage-specific nametable data (boss face tiles)
;   4. Boss sprite drops from top of screen to center of blue band
;   5. Boss does intro animation, then switches to idle pose
;   6. Wait, then Mega Man teleports in from below
;   7. Palette fade to black + boss face flash
;   8. Jump to stage loading
;
; Verified via Mesen save states:
;   - Blue band: y=88-151 (tile rows 11-18), white borders at y=88-89/150-151
;   - Boss sprite centered at ~x=124, y=112 (42×30 px bounding box)
;   - Boss name text at y=136-143 (tile row 17, col 11 = PPU $222B)
;   - Boss drops from y=$E8 (232) to y=$74 (116) at 4px/frame = 29 frames
;   - Mega Man rises from y=$80 (128) to y=$C0 (192) at 2px/frame = 32 frames
; ---------------------------------------------------------------------------
robot_master_intro:
  LDY #$0B                                  ; $189410 |\ refill weapon energy
.refill_energy:                                       ; | loop Y = $0B down to $00
  LDA $00A2,y                               ; $189412 | | $A2-$AD = weapon ammo
  BPL .energy_ok                            ; $189415 | | if negative (depleted), set to full
  LDA #$9C                                  ; $189417 | | $9C = full energy (28 units)
  STA $00A2,y                               ; $189419 | |
.energy_ok:
  DEY                                       ; $18941C | |
  BPL .refill_energy                        ; $18941D |/
  LDA $22                                   ; $18941F |\ stage < $08 = Robot Master
  CMP #$08                                  ; $189421 | | stage >= $08 = Doc Robot/Wily
  BCC .robot_master_stage                   ; $189423 |/
  JMP code_189581                           ; $189425 | → skip to stage loading for Doc/Wily

; --- Robot Master intro animation ---
.robot_master_stage:
  JSR fade_palette_in                           ; $189428 | disable sprites/rendering
  LDA #$04                                  ; $18942B |\ set rendering mode
  STA $97                                   ; $18942D |/
  JSR prepare_oam_buffer                           ; $18942F | configure PPU
  JSR task_yield                           ; $189432 | wait 1 frame
  LDA #$35                                  ; $189435 |\ play sound $35
  JSR submit_sound_ID_D9                    ; $189437 |/ (boss intro fanfare)
  JSR reset_stage_state                     ; $18943A | zero out game state

; Fill nametable 0 with boss intro layout from bank $13.
; Temporarily set $22 = $14 so metatile pointer references the correct
; level section in bank $13 (stage $14 = the boss intro screen layout).
; code_1FE8B4 with A=$07 → metatile column 7 → pointer $B0C0.
  LDA $22                                   ; $18943D |\ save real stage number
  PHA                                       ; $18943F |/
  LDA #$14                                  ; $189440 |\ $22 = $14 (boss intro layout ID)
  STA $22                                   ; $189442 |/
  LDA #$07                                  ; $189444 |\ metatile column 7
  JSR code_1FE8B4                           ; $189446 |/ pointer → $B0C0 in bank $13
.fill_intro_screen:
  LDA #$00                                  ; $189449 |\ $10 = 0 → write to nametable $2000
  STA $10                                   ; $18944B |/
  JSR fill_nametable_progressive            ; $18944D | write 4 tile rows
  JSR task_yield                           ; $189450 | wait for NMI
  LDA $70                                   ; $189453 | $70 = 0 when complete
  BNE .fill_intro_screen                    ; $189455 |
  PLA                                       ; $189457 |\ restore real stage number
  STA $22                                   ; $189458 |/

; Write stage-specific nametable data (boss face, decorations).
; Two calls to write_ppu_data_from_bank03:
;   X=$05: common intro data
;   X=$22+$06: per-boss face data
  LDX #$05                                  ; $18945A | table index $05 = common data
  LDA #$00                                  ; $18945C |\ $10 = 0 → nametable $2000
  STA $10                                   ; $18945E |/
  JSR write_ppu_data_from_bank03            ; $189460 | write common intro nametable data
  JSR task_yield                           ; $189463 | wait for NMI
  LDA $22                                   ; $189466 |\ X = stage + 6
  CLC                                       ; $189468 | | (per-boss face data table index)
  ADC #$06                                  ; $189469 | |
  TAX                                       ; $18946B |/
  JSR write_ppu_data_from_bank03            ; $18946C | write boss-specific face tiles

; Load CHR bank configuration and palettes for the intro screen.
; $9D46: 6 bytes of CHR bank IDs → $E8-$ED
; $9D16: 32 bytes of palette data (BG + sprite) → $0620 working copy
  LDY #$05                                  ; $18946F |
.load_chr_banks:
  LDA $9D46,y                               ; $189471 |
  STA $00E8,y                               ; $189474 |
  DEY                                       ; $189477 |
  BPL .load_chr_banks                       ; $189478 |
  JSR update_CHR_banks                      ; $18947A |
  LDY #$1F                                  ; $18947D |
.load_intro_palettes:
  LDA $9D16,y                               ; $18947F | 32 bytes: BG ($0620-$062F) + sprite ($0630-$063F)
  STA $0620,y                               ; $189482 |
  DEY                                       ; $189485 |
  BPL .load_intro_palettes                  ; $189486 |

; --- Set up boss entity and begin drop animation ---
; Entity slot 0: the boss sprite (reused as the intro display entity).
; $0360 = entity 0 X position (player X during gameplay)
; $03C0 = entity 0 Y position (player Y during gameplay)
  LDA #$80                                  ; $189488 |\ entity 0 X = $80 (128 = centered)
  STA $0360                                 ; $18948A |/
  LDA #$E8                                  ; $18948D |\ entity 0 Y = $E8 (232 = below screen)
  STA $03C0                                 ; $18948F |/
  LDX #$00                                  ; $189492 |\ set animation to $B0
  LDA #$B0                                  ; $189494 | | (boss intro drop animation)
  JSR reset_sprite_anim                     ; $189496 |/
  LDA $0580                                 ; $189499 |\ clear bit 6 of entity flags
  AND #$BF                                  ; $18949C | | (enable rendering?)
  STA $0580                                 ; $18949E |/
  JSR task_yield                           ; $1894A1 | wait 1 frame
  JSR fade_palette_out                           ; $1894A4 | enable rendering

; Boss drop loop: decrement Y from $E8 to $74 at 4px/frame.
; ($E8 - $74) / 4 = 29 frames for the boss to slide down.
; When anim phase ($05A0) reaches $02, switch to idle anim $1A.
.boss_drop_loop:
  LDA $03C0                                 ; $1894A7 |\ if Y == $74, skip decrement
  CMP #$74                                  ; $1894AA | | (target reached)
  BEQ .check_anim_phase                     ; $1894AC |/
  SEC                                       ; $1894AE |\ Y -= 4
  SBC #$04                                  ; $1894AF | |
  STA $03C0                                 ; $1894B1 |/
  LDA #$00                                  ; $1894B4 |\ reset anim frame counter
  STA $05E0                                 ; $1894B6 |/ (keep animation progressing)
.check_anim_phase:
  LDA $05A0                                 ; $1894B9 |\ check animation phase
  CMP #$02                                  ; $1894BC | | phase 2 = intro anim done
  BNE .boss_render_frame                    ; $1894BE |/
  LDX #$00                                  ; $1894C0 |\ switch to idle animation $1A
  LDA #$1A                                  ; $1894C2 | |
  JSR reset_sprite_anim                     ; $1894C4 |/
.boss_render_frame:
  JSR process_frame_yield_full                           ; $1894C7 | process sprites + wait for NMI
  LDA $05C0                                 ; $1894CA |\ check current OAM ID
  CMP #$1A                                  ; $1894CD | | $1A = idle pose active
  BNE .boss_drop_loop                       ; $1894CF |/ loop until idle
  LDX #$3C                                  ; $1894D1 |\ wait $3C (60) frames
  JSR task_yield_x                           ; $1894D3 |/ (boss stands idle)

; --- Mega Man teleport-in animation ---
; Mega Man rises from Y=$80 to Y=$C0, 2px/frame = 32 frames.
; (Teleporting from below the blue band upward into view.)
.megaman_rise_loop:
  LDA $0360                                 ; $1894D6 |\ if X == $C0, done
  CMP #$C0                                  ; $1894D9 | |
  BEQ .megaman_done                         ; $1894DB |/
  CLC                                       ; $1894DD |\ X += 2
  ADC #$02                                  ; $1894DE | | (note: using $0360 which is
  STA $0360                                 ; $1894E0 |/  the X position for the entity)
  JSR process_frame_yield_full                           ; $1894E3 | process sprites + wait for NMI
  JMP .megaman_rise_loop                    ; $1894E6 |

; --- Palette fade to black ---
; Fade all 3 BG palette groups to black ($0F).
; Each call to fade_palette_to_black subtracts $10 per step
; from palette colors, 4 frames per step, until all reach $0F.
.megaman_done:
  LDX #$3C                                  ; $1894E9 |\ wait $3C (60) frames
  JSR task_yield_x                           ; $1894EB |/
  LDA #$00                                  ; $1894EE |\ clear NMI skip flag
  STA $EE                                   ; $1894F0 |/
  LDY #$03                                  ; $1894F2 |\ fade BG palette 0 (bytes $00-$03)
  JSR fade_palette_to_black                 ; $1894F4 |/
  LDY #$07                                  ; $1894F7 |\ fade BG palette 1 (bytes $04-$07)
  JSR fade_palette_to_black                 ; $1894F9 |/
  LDY #$0B                                  ; $1894FC |\ fade BG palette 2 (bytes $08-$0B)
  JSR fade_palette_to_black                 ; $1894FE |/
  LDX #$B4                                  ; $189501 |\ wait $B4 (180) frames
  JSR task_yield_x                           ; $189503 |/ (3 seconds on black screen)
  JMP code_189581                           ; $189506 | → stage loading

; ---------------------------------------------------------------------------
; boss_face_palette_flash — alternates boss/default sprite palettes
; ---------------------------------------------------------------------------
; Called after the last palette fade (Y=$07 → code_189509 via BEQ).
; Flashes 17 times ($10 counts $10 down to $00), 2 frames per flash.
; Even frames: load boss-specific face colors from $9BB7 table.
; Odd frames: restore default palette from $0630 working copy.
; ---------------------------------------------------------------------------
boss_face_palette_flash:
  LDA #$10                                  ; $189509 |\ $10 = flash counter (17 iterations)
  STA $10                                   ; $18950B |/
.flash_loop:
  LDY #$03                                  ; $18950D | process 4 palette colors (Y=3..0)
  LDA $10                                   ; $18950F |\ even/odd toggle
  AND #$01                                  ; $189511 | |
  BNE .restore_default_palette              ; $189513 |/ odd → restore defaults
; Even frames: load boss face colors from $9BB7 table.
; $9BB7 + stage*8 = 8-byte palette (bright + dark variant).
; Colors 0-3 from $9BB7 → SP 0 ($0610), colors 4-7 from $9BBB → SP 1 ($0618).
  LDA $22                                   ; $189515 |\ X = stage * 8 + 3
  ASL                                       ; $189517 | |
  ASL                                       ; $189518 | |
  ASL                                       ; $189519 | |
  ORA #$03                                  ; $18951A | |
  TAX                                       ; $18951C |/
.load_boss_palette:
  LDA $9BB7,x                               ; $18951D | bright variant → SP 0
  STA $0610,y                               ; $189520 |
  LDA $9BBB,x                               ; $189523 | dark variant → SP 1
  STA $0618,y                               ; $189526 |
  DEX                                       ; $189529 |
  DEY                                       ; $18952A |
  BNE .load_boss_palette                    ; $18952B |
  BEQ .flash_wait                           ; $18952D | (always branches)
; Odd frames: copy default palettes back from $0630/$0638 working copy.
.restore_default_palette:
  LDA $0630,y                               ; $18952F | default SP 0
  STA $0610,y                               ; $189532 |
  LDA $0638,y                               ; $189535 | default SP 1
  STA $0618,y                               ; $189538 |
  DEY                                       ; $18953B |
  BNE .restore_default_palette              ; $18953C |
.flash_wait:
  INC $18                                   ; $18953E | flag palette upload
  LDX #$02                                  ; $189540 |\ wait 2 frames per flash
  JSR task_yield_x                           ; $189542 |/
  DEC $10                                   ; $189545 | decrement flash counter
  BPL .flash_loop                           ; $189547 |
  RTS                                       ; $189549 |

; ---------------------------------------------------------------------------
; fade_palette_to_black — progressively fade a BG palette group to black
; ---------------------------------------------------------------------------
; Parameters: Y = palette end index (3, 7, or $0B for BG palette 0/1/2)
; Subtracts $10 per step from each color in the palette group.
; Colors that would go below $0F are clamped to $0F (black).
; 4 steps × $10 = $40 total subtraction. 4 frames per step.
; Source: $0600,y (base palette). Destination: $0604,y (working palette).
; After the last step (Y=$07), chains into boss_face_palette_flash.
; ---------------------------------------------------------------------------
fade_palette_to_black:
  LDA #$30                                  ; $18954A |\ $10 = starting subtract value
  STA $10                                   ; $18954C |/ (decreases $30→$20→$10→$00)
  STY $11                                   ; $18954E | save palette end index
.fade_step:
  LDY $11                                   ; $189550 | restore palette index
  LDX #$03                                  ; $189552 | 4 colors per palette group
.fade_color:
  LDA $0600,y                               ; $189554 | load base palette color
  SEC                                       ; $189557 |
  SBC $10                                   ; $189558 | subtract fade amount
  BCS .store_faded                          ; $18955A | if no underflow, use result
  LDA #$0F                                  ; $18955C | clamp to black ($0F)
.store_faded:
  STA $0604,y                               ; $18955E | store to working palette
  DEY                                       ; $189561 |
  DEX                                       ; $189562 |
  BPL .fade_color                           ; $189563 |
  STY $18                                   ; $189565 | flag palette upload
  LDX #$04                                  ; $189567 |\ wait 4 frames per step
  JSR task_yield_x                           ; $189569 |/
  LDA $10                                   ; $18956C |\ $10 -= $10 (next darker step)
  SEC                                       ; $18956E | |
  SBC #$10                                  ; $18956F | |
  STA $10                                   ; $189571 |/
  BCS .fade_step                            ; $189573 | loop while $10 >= 0
  LDA $11                                   ; $189575 |\ if this was BG palette 1 (Y=$07),
  CMP #$07                                  ; $189577 | | chain into boss face flash
  BEQ boss_face_palette_flash               ; $189579 |/
  LDX #$1E                                  ; $18957B |\ wait $1E (30) frames between groups
  JSR task_yield_x                           ; $18957D |/
  RTS                                       ; $189580 |

code_189581:
  LDA $61                                   ; $189581 |
  CMP #$FF                                  ; $189583 |
  BEQ code_18958A                           ; $189585 |
  JMP code_18968C                           ; $189587 |

code_18958A:
  JSR fade_palette_in                           ; $18958A |
  LDA #$04                                  ; $18958D |
  STA $97                                   ; $18958F |
  JSR prepare_oam_buffer                           ; $189591 |
  JSR task_yield                           ; $189594 |
  JSR reset_stage_state                           ; $189597 |
  LDA #$10                                  ; $18959A |
  JSR submit_sound_ID_D9                    ; $18959C |
  LDA #$13                                  ; $18959F |
  STA $F5                                   ; $1895A1 |
  JSR select_PRG_banks                      ; $1895A3 |
  LDA #$01                                  ; $1895A6 |
  JSR code_1FE8B4                           ; $1895A8 |
  LDA #$00                                  ; $1895AB |
  STA $70                                   ; $1895AD |
code_1895AF:
  LDA #$00                                  ; $1895AF |
  STA $10                                   ; $1895B1 |
  JSR fill_nametable_progressive                           ; $1895B3 |
  JSR task_yield                           ; $1895B6 |
  LDA $70                                   ; $1895B9 |
  BNE code_1895AF                           ; $1895BB |
  LDA #$00                                  ; $1895BD |
  STA $10                                   ; $1895BF |
  JSR code_18995C                           ; $1895C1 |
  LDA #$00                                  ; $1895C4 |
  STA $10                                   ; $1895C6 |
  LDX #$03                                  ; $1895C8 |
  JSR write_ppu_data_from_bank03                           ; $1895CA |
  JSR task_yield                           ; $1895CD |
  LDX #$04                                  ; $1895D0 |
  JSR write_ppu_data_from_bank03                           ; $1895D2 |
  JSR task_yield                           ; $1895D5 |
  LDA #$04                                  ; $1895D8 |
  JSR code_1FE8B4                           ; $1895DA |
  LDA #$00                                  ; $1895DD |
  STA $70                                   ; $1895DF |
code_1895E1:
  LDA #$04                                  ; $1895E1 |
  STA $10                                   ; $1895E3 |
  JSR fill_nametable_progressive                           ; $1895E5 |
  JSR task_yield                           ; $1895E8 |
  LDA $70                                   ; $1895EB |
  BNE code_1895E1                           ; $1895ED |
  LDA #$7C                                  ; $1895EF |
  STA $E8                                   ; $1895F1 |
  LDA #$7E                                  ; $1895F3 |
  STA $E9                                   ; $1895F5 |
  LDA #$36                                  ; $1895F7 |
  STA $EC                                   ; $1895F9 |
  LDA #$34                                  ; $1895FB |
  STA $ED                                   ; $1895FD |
  JSR update_CHR_banks                      ; $1895FF |
  LDY #$0F                                  ; $189602 |
code_189604:
  LDA $9C33,y                               ; $189604 |
  STA $0620,y                               ; $189607 |
  DEY                                       ; $18960A |
  BPL code_189604                           ; $18960B |
  LDY #$0F                                  ; $18960D |
code_18960F:
  LDA $9C23,y                               ; $18960F |
  STA $0630,y                               ; $189612 |
  DEY                                       ; $189615 |
  BPL code_18960F                           ; $189616 |
  JSR task_yield                           ; $189618 |
  JSR code_1899FA                           ; $18961B |
  LDA #$00                                  ; $18961E |
  STA $18                                   ; $189620 |
  JSR task_yield                           ; $189622 |
  LDA #$58                                  ; $189625 |
  STA $5E                                   ; $189627 |
  LDA #$07                                  ; $189629 |
  STA $F8                                   ; $18962B |
  JSR task_yield                           ; $18962D |
  JSR fade_palette_out                           ; $189630 |
  LDA $60                                   ; $189633 |
  BEQ code_18964D                           ; $189635 |
  LDA #$12                                  ; $189637 |
  STA $60                                   ; $189639 |
  LDY #$00                                  ; $18963B |
  STY $10                                   ; $18963D |
  LDX #$19                                  ; $18963F |
  JSR write_portrait_frames                           ; $189641 |
  JSR write_center_portrait                           ; $189644 |
  JSR code_189A87                           ; $189647 |
  JMP code_189681                           ; $18964A |

code_18964D:
  LDX #$F0                                  ; $18964D |
  JSR task_yield_x                           ; $18964F |
  LDA #$3A                                  ; $189652 |
  STA $61                                   ; $189654 |
  LDA #$09                                  ; $189656 |
  STA $60                                   ; $189658 |
  LDA #$74                                  ; $18965A |
  STA $E9                                   ; $18965C |
  JSR update_CHR_banks                      ; $18965E |
  LDY #$0F                                  ; $189661 |
code_189663:
  LDA $9D36,y                               ; $189663 |
  STA $0600,y                               ; $189666 |
  STA $0620,y                               ; $189669 |
  DEY                                       ; $18966C |
  BPL code_189663                           ; $18966D |
  STY $18                                   ; $18966F |
  LDA #$00                                  ; $189671 |
  STA $10                                   ; $189673 |
  LDY #$01                                  ; $189675 |
  LDX #$19                                  ; $189677 |
  JSR write_portrait_frames                           ; $189679 |
  LDX #$19                                  ; $18967C |
  JSR write_portrait_faces                           ; $18967E |
code_189681:
  LDA #$01                                  ; $189681 |
  STA $12                                   ; $189683 |
  LDA #$03                                  ; $189685 |
  STA $13                                   ; $189687 |
  JMP code_189258                           ; $189689 |

code_18968C:
  JSR fade_palette_in                           ; $18968C |
  LDA #$04                                  ; $18968F |
  STA $97                                   ; $189691 |
  JSR prepare_oam_buffer                           ; $189693 |
  JSR task_yield                           ; $189696 |
  JSR reset_stage_state                           ; $189699 |
  LDA #$13                                  ; $18969C |
  STA $F5                                   ; $18969E |
  JSR select_PRG_banks                      ; $1896A0 |
  LDA #$01                                  ; $1896A3 |
  STA $FD                                   ; $1896A5 |
  LDA #$02                                  ; $1896A7 |
  JSR code_1FE8B4                           ; $1896A9 |
code_1896AC:
  LDA #$04                                  ; $1896AC |
  STA $10                                   ; $1896AE |
  JSR fill_nametable_progressive                           ; $1896B0 |
  JSR task_yield                           ; $1896B3 |
  LDA $70                                   ; $1896B6 |
  BNE code_1896AC                           ; $1896B8 |
  LDA #$7C                                  ; $1896BA |
  STA $E8                                   ; $1896BC |
  LDA #$76                                  ; $1896BE |
  STA $E9                                   ; $1896C0 |
  LDA #$36                                  ; $1896C2 |
  STA $EC                                   ; $1896C4 |
  LDA #$34                                  ; $1896C6 |
  STA $ED                                   ; $1896C8 |
  JSR update_CHR_banks                      ; $1896CA |
  LDY #$0F                                  ; $1896CD |
code_1896CF:
  LDA $9C43,y                               ; $1896CF |
  STA $0620,y                               ; $1896D2 |
  DEY                                       ; $1896D5 |
  BPL code_1896CF                           ; $1896D6 |
  LDY #$0F                                  ; $1896D8 |
code_1896DA:
  LDA $9C23,y                               ; $1896DA |
  STA $0630,y                               ; $1896DD |
  DEY                                       ; $1896E0 |
  BPL code_1896DA                           ; $1896E1 |
  LDA #$04                                  ; $1896E3 |
  STA $10                                   ; $1896E5 |
  LDX #$12                                  ; $1896E7 |
  JSR write_ppu_data_from_bank03                           ; $1896E9 |
  JSR task_yield                           ; $1896EC |
  LDA #$03                                  ; $1896EF |
  STA $F5                                   ; $1896F1 |
  JSR select_PRG_banks                      ; $1896F3 |
  JSR $A8DD                                 ; $1896F6 |
  JSR fade_palette_out                           ; $1896F9 |
code_1896FC:
  LDA $14                                   ; $1896FC |
  AND #$90                                  ; $1896FE |
  BNE code_189708                           ; $189700 |
  JSR task_yield                           ; $189702 |
  JMP code_1896FC                           ; $189705 |

code_189708:
  JMP code_189212                           ; $189708 |

; --- write_portrait_frames ---
; Writes portrait frame border tiles to the nametable for all 8 boss positions.
; Uses PPU update buffer at $0780+. Format per group:
;   $0780: PPU addr high, $0781: PPU addr low, $0782: tile count-1, $0783+: tile IDs
; Base addresses from $9D4C/$9D55 tables, tile layout from $9D5E data.
; Iterates y=0,2,4(skip center),6,8 for all 9 grid positions minus Mega Man center.
;
; Portrait frame pixel positions (decoded from nametable addresses):
;   Col 0: x=16   Col 1: x=96   Col 2: x=176
;   Row 0: y=24   Row 1: y=88   Row 2: y=152
; Frame dimensions: 8×6 tiles (64×48 px)
write_portrait_frames:
  STX $0F                                   ; $18970B |
.next_portrait:
  LDA $9D4C,y                               ; $18970D | PPU addr low byte for portrait y
  STA $00                                   ; $189710 |
  LDA $9D55,y                               ; $189712 | PPU addr high byte ($20/$21/$22)
  ORA $10                                   ; $189715 |
  STA $01                                   ; $189717 |
  LDX #$00                                  ; $189719 |
.next_tile_group:
  LDA $9D5E,x                               ; $18971B | row Y-offset (bit 7 = end marker)
  BMI .portrait_done                        ; $18971E |
  LDA $9D5F,x                               ; $189720 | row X-offset within nametable
  CLC                                       ; $189723 |
  ADC $00                                   ; $189724 | + base low byte
  STA $0781,x                               ; $189726 | → PPU addr low
  LDA $9D5E,x                               ; $189729 | row offset (carry into high byte)
  ADC $01                                   ; $18972C | + base high byte
  STA $0780,x                               ; $18972E | → PPU addr high
  INX                                       ; $189731 |
  INX                                       ; $189732 |
  LDA $9D5E,x                               ; $189733 | tile count (N → writes N+1 tiles)
  STA $0780,x                               ; $189736 |
  STA $02                                   ; $189739 | loop counter
  INX                                       ; $18973B |
.copy_tiles:
  LDA $9D5E,x                               ; $18973C | tile ID
  STA $0780,x                               ; $18973F |
  INX                                       ; $189742 |
  DEC $02                                   ; $189743 |
  BPL .copy_tiles                           ; $189745 |
  BMI .next_tile_group                      ; $189747 |
.portrait_done:
  STA $0780,x                               ; $189749 | $FF end marker
  STA $19                                   ; $18974C |
  TYA                                       ; $18974E |
  PHA                                       ; $18974F |
  LDX $0F                                   ; $189750 |
  JSR task_yield_x                           ; $189752 | submit PPU update buffer
  PLA                                       ; $189755 |
  TAY                                       ; $189756 |
.advance_portrait:
  INY                                       ; $189757 |
  INY                                       ; $189758 | y += 2
  CPY #$04                                  ; $189759 |
  BEQ .advance_portrait                     ; $18975B | skip index 4 (center = Mega Man)
  CPY #$09                                  ; $18975D |
  BCC .next_portrait                        ; $18975F | loop until all 9 done
  RTS                                       ; $189761 |

; --- write_portrait_faces ---
; Writes 4×4 portrait face tiles into each boss portrait frame.
; Face tiles from $9D99-$9DA8 are arranged as 4 rows of 4 tiles each.
; PPU addresses from $9DC9 (high) / $9DD2 (low), rows spaced $20 (one nametable row).
; Also writes attribute table entry at $23C0+ for palette assignment.
;
; Face pixel positions (2 tiles inside the frame border):
;   Col 0: x=32   Col 1: x=112  Col 2: x=192
;   Row 0: y=32   Row 1: y=96   Row 2: y=160
; Face dimensions: 4×4 tiles (32×32 px)
;
; Face tile layout (same tiles for ALL portraits — actual portrait selected by CHR bank):
;   Row 0: $C8 $C9 $CA $CB
;   Row 1: $D8 $D9 $DA $DB
;   Row 2: $E8 $E9 $EA $EB
;   Row 3: $F8 $F9 $FA $FB
write_portrait_faces:
  STX $0F                                   ; $189762 |
  LDX #$03                                  ; $189764 |
.copy_face_tiles:
  LDA $9D99,x                               ; $189766 | face row 0 tiles ($C8-$CB)
  STA $0783,x                               ; $189769 |
  LDA $9D9D,x                               ; $18976C | face row 1 tiles ($D8-$DB)
  STA $078A,x                               ; $18976F |
  LDA $9DA1,x                               ; $189772 | face row 2 tiles ($E8-$EB)
  STA $0791,x                               ; $189775 |
  LDA $9DA5,x                               ; $189778 | face row 3 tiles ($F8-$FB)
  STA $0798,x                               ; $18977B |
  DEX                                       ; $18977E |
  BPL .copy_face_tiles                      ; $18977F |
  LDY #$00                                  ; $189781 |
.next_face:
  LDA $9DC9,y                               ; $189783 | PPU addr high ($20/$21/$22)
  ORA $10                                   ; $189786 |
  STA $0780                                 ; $189788 | row 0 PPU high
  STA $0787                                 ; $18978B | row 1 PPU high
  STA $078E                                 ; $18978E | row 2 PPU high
  STA $0795                                 ; $189791 | row 3 PPU high
  CLC                                       ; $189794 |
  LDA $9DD2,y                               ; $189795 | PPU addr low (base)
  STA $0781                                 ; $189798 | row 0 PPU low
  ADC #$20                                  ; $18979B | + 1 nametable row (32 bytes)
  STA $0788                                 ; $18979D | row 1 PPU low
  ADC #$20                                  ; $1897A0 |
  STA $078F                                 ; $1897A2 | row 2 PPU low
  ADC #$20                                  ; $1897A5 |
  STA $0796                                 ; $1897A7 | row 3 PPU low
  LDA #$03                                  ; $1897AA | 4 tiles per row (count-1)
  STA $0782                                 ; $1897AC |
  STA $0789                                 ; $1897AF |
  STA $0790                                 ; $1897B2 |
  STA $0797                                 ; $1897B5 |
  LDA #$23                                  ; $1897B8 | attribute table addr high ($23xx)
  ORA $10                                   ; $1897BA |
  STA $079C                                 ; $1897BC |
  LDA #$C0                                  ; $1897BF | attribute table base ($23C0)
  ORA $9DA9,y                               ; $1897C1 | + portrait-specific attr offset
  STA $079D                                 ; $1897C4 |
  LDA #$00                                  ; $1897C7 | 1 attribute byte (count-1=0)
  STA $079E                                 ; $1897C9 |
  LDA #$55                                  ; $1897CC | attr value $55 = palette 1 for all quadrants
  STA $079F                                 ; $1897CE |
  LDA #$FF                                  ; $1897D1 | end marker
  STA $07A0                                 ; $1897D3 |
  STA $19                                   ; $1897D6 |
  TYA                                       ; $1897D8 |
  PHA                                       ; $1897D9 |
  LDX $0F                                   ; $1897DA |
  JSR task_yield_x                           ; $1897DC | submit PPU update buffer
  PLA                                       ; $1897DF |
  TAY                                       ; $1897E0 |
.advance_face:
  INY                                       ; $1897E1 |
  INY                                       ; $1897E2 | y += 2
  CPY #$04                                  ; $1897E3 |
  BEQ .advance_face                         ; $1897E5 | skip center
  CPY #$09                                  ; $1897E7 |
  BCC .next_face                            ; $1897E9 |
  RTS                                       ; $1897EB |

write_center_portrait:
  LDA $9DB2                                 ; $1897EC |
  ORA $10                                   ; $1897EF |
  STA $0780                                 ; $1897F1 |
  STA $0787                                 ; $1897F4 |
  STA $078E                                 ; $1897F7 |
  STA $0795                                 ; $1897FA |
  CLC                                       ; $1897FD |
  LDA $9DB3                                 ; $1897FE |
  STA $0781                                 ; $189801 |
  ADC #$20                                  ; $189804 |
  STA $0788                                 ; $189806 |
  ADC #$20                                  ; $189809 |
  STA $078F                                 ; $18980B |
  ADC #$20                                  ; $18980E |
  STA $0796                                 ; $189810 |
  LDX #$03                                  ; $189813 |
  STX $0782                                 ; $189815 |
  STX $0789                                 ; $189818 |
  STX $0790                                 ; $18981B |
  STX $0797                                 ; $18981E |
code_189821:
  LDA $9DB4,x                               ; $189821 |
  STA $0783,x                               ; $189824 |
  LDA $9DB8,x                               ; $189827 |
  STA $078A,x                               ; $18982A |
  LDA $9DBC,x                               ; $18982D |
  STA $0791,x                               ; $189830 |
  LDA $9DC0,x                               ; $189833 |
  STA $0798,x                               ; $189836 |
  DEX                                       ; $189839 |
  BPL code_189821                           ; $18983A |
  LDX #$04                                  ; $18983C |
code_18983E:
  LDA $9DC4,x                               ; $18983E |
  STA $079C,x                               ; $189841 |
  DEX                                       ; $189844 |
  BPL code_18983E                           ; $189845 |
  STA $079C                                 ; $189847 |
  ORA $10                                   ; $18984A |
  STA $079C                                 ; $18984C |
  STX $07A1                                 ; $18984F |
  STX $19                                   ; $189852 |
  JSR task_yield                           ; $189854 |
  LDX #$0E                                  ; $189857 |
  JSR write_ppu_data_from_bank03                           ; $189859 |
  RTS                                       ; $18985C |

code_18985D:
  JSR fade_palette_in                           ; $18985D |
  LDA #$04                                  ; $189860 |
  STA $97                                   ; $189862 |
  JSR prepare_oam_buffer                           ; $189864 |
  JSR task_yield                           ; $189867 |
  LDA #$0E                                  ; $18986A |
  JSR submit_sound_ID_D9                    ; $18986C |
  JSR reset_stage_state                           ; $18986F |
  LDA #$01                                  ; $189872 |
  STA $FD                                   ; $189874 |
  LDA #$00                                  ; $189876 |
  STA $FA                                   ; $189878 |
  LDA #$02                                  ; $18987A |
  JSR code_1FE8B4                           ; $18987C |
code_18987F:
  LDA #$04                                  ; $18987F |
  STA $10                                   ; $189881 |
  JSR fill_nametable_progressive                           ; $189883 |
  JSR task_yield                           ; $189886 |
  LDA $70                                   ; $189889 |
  BNE code_18987F                           ; $18988B |
  LDA #$7C                                  ; $18988D |
  STA $E8                                   ; $18988F |
  LDA #$76                                  ; $189891 |
  STA $E9                                   ; $189893 |
  LDA #$36                                  ; $189895 |
  STA $EC                                   ; $189897 |
  LDA #$34                                  ; $189899 |
  STA $ED                                   ; $18989B |
  JSR update_CHR_banks                      ; $18989D |
  LDY #$0F                                  ; $1898A0 |
code_1898A2:
  LDA $9C43,y                               ; $1898A2 |
  STA $0620,y                               ; $1898A5 |
  DEY                                       ; $1898A8 |
  BPL code_1898A2                           ; $1898A9 |
  LDY #$0F                                  ; $1898AB |
code_1898AD:
  LDA $9C23,y                               ; $1898AD |
  STA $0630,y                               ; $1898B0 |
  DEY                                       ; $1898B3 |
  BPL code_1898AD                           ; $1898B4 |
  JSR task_yield                           ; $1898B6 |
  LDX #$01                                  ; $1898B9 |
  LDA #$04                                  ; $1898BB |
  STA $10                                   ; $1898BD |
  JSR write_ppu_data_from_bank03                           ; $1898BF |
  LDA #$58                                  ; $1898C2 |
  STA $5E                                   ; $1898C4 |
  LDA #$07                                  ; $1898C6 |
  STA $F8                                   ; $1898C8 |
  LDA #$03                                  ; $1898CA |
  STA $F5                                   ; $1898CC |
  JSR select_PRG_banks                      ; $1898CE |
  JSR $A8DD                                 ; $1898D1 |
  JSR task_yield                           ; $1898D4 |
  JSR fade_palette_out                           ; $1898D7 |
  LDA #$78                                  ; $1898DA |
code_1898DC:
  PHA                                       ; $1898DC |
  JSR task_yield                           ; $1898DD |
  PLA                                       ; $1898E0 |
  SEC                                       ; $1898E1 |
  SBC #$01                                  ; $1898E2 |
  BNE code_1898DC                           ; $1898E4 |
  LDA #$04                                  ; $1898E6 |
  STA $10                                   ; $1898E8 |
  LDX #$02                                  ; $1898EA |
  JSR write_ppu_data_from_bank03                           ; $1898EC |
  JSR code_1893E9                           ; $1898EF |
code_1898F2:
  JSR code_1893FE                           ; $1898F2 |
  LDA $14                                   ; $1898F5 |
  AND #$10                                  ; $1898F7 |
  BNE code_189901                           ; $1898F9 |
  JSR task_yield                           ; $1898FB |
  JMP code_1898F2                           ; $1898FE |

code_189901:
  LDX #$0B                                  ; $189901 |
code_189903:
  LDA $A2,x                                 ; $189903 |
  BPL code_18990B                           ; $189905 |
  LDA #$9C                                  ; $189907 |
  STA $A2,x                                 ; $189909 |
code_18990B:
  DEX                                       ; $18990B |
  BPL code_189903                           ; $18990C |
  LDA $0200                                 ; $18990E |
  CMP #$C7                                  ; $189911 |
  BEQ code_18991E                           ; $189913 |
  LDA $22                                   ; $189915 |
  CMP #$0C                                  ; $189917 |
  BCS code_18992C                           ; $189919 |
  JSR code_189212                           ; $18991B |
code_18991E:
  LDA #$02                                  ; $18991E |
  STA $AE                                   ; $189920 |
  LDA $60                                   ; $189922 |
  CMP #$12                                  ; $189924 |
  BNE code_18992B                           ; $189926 |
  JMP code_189ABC                           ; $189928 |

code_18992B:
  RTS                                       ; $18992B |

code_18992C:
  LDA #$03                                  ; $18992C |
  STA $F5                                   ; $18992E |
  JSR select_PRG_banks                      ; $189930 |
  JMP $A879                                 ; $189933 |

; ---------------------------------------------------------------------------
; reset_stage_state — zero out game state for stage transition
; ---------------------------------------------------------------------------
; Clears scroll position, weapon state, screen page, and various
; game state variables to prepare for the boss intro or stage load.
; ---------------------------------------------------------------------------
reset_stage_state:
  LDA #$00                                  ; $189936 |
  STA $A000                                 ; $189938 | reset something in mapped bank
  STA $59                                   ; $18993B | game sub-state
  STA $F9                                   ; $18993D | camera/scroll page
  STA $0380                                 ; $18993F | entity 0 screen page (Y high)
  STA $03E0                                 ; $189942 | entity 0 screen page (X high)
  STA $B1                                   ; $189945 | scroll-related
  STA $B2                                   ; $189947 |
  STA $B3                                   ; $189949 |
  STA $FD                                   ; $18994B | horizontal scroll (nametable select)
  STA $FC                                   ; $18994D | horizontal scroll (sub-tile)
  STA $A1                                   ; $18994F | menu cursor
  STA $B4                                   ; $189951 |
  STA $A0                                   ; $189953 | weapon ID (0 = Mega Buster)
  STA $9E                                   ; $189955 |
  STA $9F                                   ; $189957 |
  STA $70                                   ; $189959 | nametable fill progress counter
  RTS                                       ; $18995B |

code_18995C:
  JSR code_1899DC                           ; $18995C |
  LDX #$08                                  ; $18995F |
code_189961:
  LDA $9DED,x                               ; $189961 |
  BEQ code_1899CC                           ; $189964 |
  AND $61                                   ; $189966 |
  BEQ code_1899BA                           ; $189968 |
code_18996A:
  LDA $9DC9,x                               ; $18996A |
  ORA $10                                   ; $18996D |
  STA $0780                                 ; $18996F |
  STA $0787                                 ; $189972 |
  STA $078E                                 ; $189975 |
  STA $0795                                 ; $189978 |
  CLC                                       ; $18997B |
  LDA $9DD2,x                               ; $18997C |
  STA $0781                                 ; $18997F |
  ADC #$20                                  ; $189982 |
  STA $0788                                 ; $189984 |
  ADC #$20                                  ; $189987 |
  STA $078F                                 ; $189989 |
  ADC #$20                                  ; $18998C |
  STA $0796                                 ; $18998E |
  LDA #$03                                  ; $189991 |
  STA $0782                                 ; $189993 |
  STA $0789                                 ; $189996 |
  STA $0790                                 ; $189999 |
  STA $0797                                 ; $18999C |
  LDY #$03                                  ; $18999F |
  LDA #$24                                  ; $1899A1 |
code_1899A3:
  STA $0783,y                               ; $1899A3 |
  STA $078A,y                               ; $1899A6 |
  STA $0791,y                               ; $1899A9 |
  STA $0798,y                               ; $1899AC |
  DEY                                       ; $1899AF |
  BPL code_1899A3                           ; $1899B0 |
  STY $079C                                 ; $1899B2 |
  STY $19                                   ; $1899B5 |
  JSR task_yield                           ; $1899B7 |
code_1899BA:
  DEX                                       ; $1899BA |
  BPL code_189961                           ; $1899BB |
  LDA $60                                   ; $1899BD |
  BEQ code_1899CB                           ; $1899BF |
  CMP #$12                                  ; $1899C1 |
  BNE code_1899CB                           ; $1899C3 |
  JSR write_center_portrait                           ; $1899C5 |
  JSR task_yield                           ; $1899C8 |
code_1899CB:
  RTS                                       ; $1899CB |

code_1899CC:
  LDA $60                                   ; $1899CC |
  BEQ code_1899BA                           ; $1899CE |
  CMP #$12                                  ; $1899D0 |
  BEQ code_18996A                           ; $1899D2 |
  LDA $61                                   ; $1899D4 |
  CMP #$FF                                  ; $1899D6 |
  BNE code_1899BA                           ; $1899D8 |
  BEQ code_18996A                           ; $1899DA |
code_1899DC:
  LDA $60                                   ; $1899DC |
  BEQ code_1899F9                           ; $1899DE |
  LDY #$01                                  ; $1899E0 |
  LDX #$01                                  ; $1899E2 |
  JSR write_portrait_frames                           ; $1899E4 |
  LDA $60                                   ; $1899E7 |
  CMP #$12                                  ; $1899E9 |
  BNE code_1899F4                           ; $1899EB |
  LDY #$00                                  ; $1899ED |
  LDX #$01                                  ; $1899EF |
  JSR write_portrait_frames                           ; $1899F1 |
code_1899F4:
  LDX #$01                                  ; $1899F4 |
  JSR write_portrait_faces                           ; $1899F6 |
code_1899F9:
  RTS                                       ; $1899F9 |

code_1899FA:
  LDX #$00                                  ; $1899FA |
  LDA $60                                   ; $1899FC |
  BEQ code_189A19                           ; $1899FE |
  LDA #$74                                  ; $189A00 |
  STA $E9                                   ; $189A02 |
  JSR update_CHR_banks                      ; $189A04 |
  LDY #$0F                                  ; $189A07 |
code_189A09:
  LDA $9D36,y                               ; $189A09 |
  STA $0600,y                               ; $189A0C |
  STA $0620,y                               ; $189A0F |
  DEY                                       ; $189A12 |
  BPL code_189A09                           ; $189A13 |
  STY $18                                   ; $189A15 |
  LDX #$98                                  ; $189A17 |
code_189A19:
  STX $00                                   ; $189A19 |
  LDA $F5                                   ; $189A1B |
  PHA                                       ; $189A1D |
  LDA #$03                                  ; $189A1E |
  STA $F5                                   ; $189A20 |
  JSR select_PRG_banks                      ; $189A22 |
  LDX $00                                   ; $189A25 |
code_189A27:
  LDA $A231,x                               ; $189A27 |
  STA $0200,x                               ; $189A2A |
  LDA $A232,x                               ; $189A2D |
  STA $0201,x                               ; $189A30 |
  LDA $A233,x                               ; $189A33 |
  STA $0202,x                               ; $189A36 |
  LDA $A234,x                               ; $189A39 |
  STA $0203,x                               ; $189A3C |
  INX                                       ; $189A3F |
  INX                                       ; $189A40 |
  INX                                       ; $189A41 |
  INX                                       ; $189A42 |
  CPX #$CC                                  ; $189A43 |
  BNE code_189A27                           ; $189A45 |
  PLA                                       ; $189A47 |
  STA $F5                                   ; $189A48 |
  JSR select_PRG_banks                      ; $189A4A |
  LDX #$08                                  ; $189A4D |
code_189A4F:
  LDA $9DED,x                               ; $189A4F |
  BEQ code_189A71                           ; $189A52 |
  AND $61                                   ; $189A54 |
  BEQ code_189A6D                           ; $189A56 |
code_189A58:
  LDY $9DDB,x                               ; $189A58 |
  LDA $9DE4,x                               ; $189A5B |
  STA $00                                   ; $189A5E |
  LDA #$F8                                  ; $189A60 |
code_189A62:
  STA $0200,y                               ; $189A62 |
  INY                                       ; $189A65 |
  INY                                       ; $189A66 |
  INY                                       ; $189A67 |
  INY                                       ; $189A68 |
  DEC $00                                   ; $189A69 |
  BPL code_189A62                           ; $189A6B |
code_189A6D:
  DEX                                       ; $189A6D |
  BPL code_189A4F                           ; $189A6E |
  RTS                                       ; $189A70 |

code_189A71:
  LDA $60                                   ; $189A71 |
  BEQ code_189A6D                           ; $189A73 |
  CMP #$12                                  ; $189A75 |
  BEQ code_189A81                           ; $189A77 |
  LDA $61                                   ; $189A79 |
  CMP #$FF                                  ; $189A7B |
  BNE code_189A6D                           ; $189A7D |
  BEQ code_189A58                           ; $189A7F |
code_189A81:
  JSR code_189A87                           ; $189A81 |
  JMP code_189A58                           ; $189A84 |

code_189A87:
  STY $00                                   ; $189A87 |
  LDY #$20                                  ; $189A89 |
code_189A8B:
  LDA $9DF6,y                               ; $189A8B |
  STA $02DC,y                               ; $189A8E |
  LDA $9DF7,y                               ; $189A91 |
  STA $02DD,y                               ; $189A94 |
  LDA $9DF8,y                               ; $189A97 |
  STA $02DE,y                               ; $189A9A |
  LDA $9DF9,y                               ; $189A9D |
  STA $02DF,y                               ; $189AA0 |
  DEY                                       ; $189AA3 |
  DEY                                       ; $189AA4 |
  DEY                                       ; $189AA5 |
  DEY                                       ; $189AA6 |
  BPL code_189A8B                           ; $189AA7 |
  LDY #$0F                                  ; $189AA9 |
code_189AAB:
  LDA $9E1A,y                               ; $189AAB |
  STA $0610,y                               ; $189AAE |
  STA $0630,y                               ; $189AB1 |
  DEY                                       ; $189AB4 |
  BPL code_189AAB                           ; $189AB5 |
  STY $18                                   ; $189AB7 |
  LDY $00                                   ; $189AB9 |
  RTS                                       ; $189ABB |

code_189ABC:
  PLA                                       ; $189ABC |
  PLA                                       ; $189ABD |
code_189ABE:
  JSR fade_palette_in                           ; $189ABE |
  JSR reset_stage_state                           ; $189AC1 |
  LDA #$04                                  ; $189AC4 |
  STA $97                                   ; $189AC6 |
  JSR prepare_oam_buffer                           ; $189AC8 |
  JSR task_yield                           ; $189ACB |
  JSR clear_entity_table                           ; $189ACE |
  LDA #$01                                  ; $189AD1 |
  STA $A000                                 ; $189AD3 |
  LDA #$00                                  ; $189AD6 |
  STA $F8                                   ; $189AD8 |
  STA $9E                                   ; $189ADA |
  STA $9F                                   ; $189ADC |
  STA $EE                                   ; $189ADE |
  STA $03E0                                 ; $189AE0 |
  STA $03C0                                 ; $189AE3 |
  LDA #$17                                  ; $189AE6 |
  STA $29                                   ; $189AE8 |
  LDA #$20                                  ; $189AEA |
  STA $2A                                   ; $189AEC |
  LDA #$30                                  ; $189AEE |
  STA $0360                                 ; $189AF0 |
  LDA #$01                                  ; $189AF3 |
  STA $31                                   ; $189AF5 |
  STA $23                                   ; $189AF7 |
  STA $2E                                   ; $189AF9 |
  LDA #$0D                                  ; $189AFB |
  STA $2B                                   ; $189AFD |
  LDA #$03                                  ; $189AFF |
  STA $22                                   ; $189B01 |
  STA $F5                                   ; $189B03 |
  JSR select_PRG_banks                      ; $189B05 |
  LDA #$1F                                  ; $189B08 |
  STA $24                                   ; $189B0A |
  LDA #$21                                  ; $189B0C |
code_189B0E:
  PHA                                       ; $189B0E |
  LDA #$01                                  ; $189B0F |
  STA $10                                   ; $189B11 |
  JSR do_render_column                           ; $189B13 |
  JSR task_yield                           ; $189B16 |
  PLA                                       ; $189B19 |
  SEC                                       ; $189B1A |
  SBC #$01                                  ; $189B1B |
  BNE code_189B0E                           ; $189B1D |
  STA $2C                                   ; $189B1F |
  STA $2D                                   ; $189B21 |
  LDA #$50                                  ; $189B23 |
  STA $E8                                   ; $189B25 |
  LDA #$52                                  ; $189B27 |
  STA $E9                                   ; $189B29 |
  LDA #$1D                                  ; $189B2B |
  STA $EC                                   ; $189B2D |
  LDA #$1E                                  ; $189B2F |
  STA $ED                                   ; $189B31 |
  JSR update_CHR_banks                      ; $189B33 |
  LDY #$1F                                  ; $189B36 |
code_189B38:
  LDA $9E2A,y                               ; $189B38 |
  STA $0620,y                               ; $189B3B |
  DEY                                       ; $189B3E |
  BPL code_189B38                           ; $189B3F |
  LDA #$2A                                  ; $189B41 |
  STA $52                                   ; $189B43 |
  LDX #$1F                                  ; $189B45 |
  LDA #$80                                  ; $189B47 |
  STA $031F                                 ; $189B49 |
  LDA #$94                                  ; $189B4C |
  STA $059F                                 ; $189B4E |
  LDA #$53                                  ; $189B51 |
  STA $033F                                 ; $189B53 |
  LDA #$18                                  ; $189B56 |
  STA $04FF                                 ; $189B58 |
  LDA #$C2                                  ; $189B5B |
  STA $049F                                 ; $189B5D |
  LDA #$01                                  ; $189B60 |
  STA $043F                                 ; $189B62 |
  JSR reset_gravity                         ; $189B65 |
  LDA #$99                                  ; $189B68 |
  JSR reset_sprite_anim                     ; $189B6A |
  LDA #$18                                  ; $189B6D |
  STA $F9                                   ; $189B6F |
  STA $0380                                 ; $189B71 |
  STA $039F                                 ; $189B74 |
  LDA #$C0                                  ; $189B77 |
  STA $037F                                 ; $189B79 |
  LDA #$02                                  ; $189B7C |
  STA $04BF                                 ; $189B7E |
  LDA #$00                                  ; $189B81 |
  STA $041F                                 ; $189B83 |
  STA $03FF                                 ; $189B86 |
  STA $03DF                                 ; $189B89 |
  STA $051F                                 ; $189B8C |
  STA $053F                                 ; $189B8F |
  STA $055F                                 ; $189B92 |
  STA $057F                                 ; $189B95 |
  STA $0100                                 ; $189B98 |
  STA $0101                                 ; $189B9B |
  STA $0102                                 ; $189B9E |
  STA $0103                                 ; $189BA1 |
  LDA #$30                                  ; $189BA4 |
  STA $0360                                 ; $189BA6 |
  LDA #$0C                                  ; $189BA9 |
  JSR submit_sound_ID_D9                    ; $189BAB |
  JSR task_yield                           ; $189BAE |
  JSR fade_palette_out                           ; $189BB1 |
  JMP code_1EC9B3                           ; $189BB4 |

  db $0F, $30, $30, $17, $0F, $07, $30, $17 ; $189BB7 |
  db $0F, $30, $10, $16, $0F, $06, $10, $16 ; $189BBF |
  db $0F, $30, $30, $21, $0F, $11, $30, $21 ; $189BC7 |
  db $0F, $30, $10, $01, $0F, $0C, $10, $01 ; $189BCF |
  db $0F, $30, $27, $00, $0F, $00, $28, $00 ; $189BD7 |
  db $0F, $30, $30, $19, $0F, $09, $30, $19 ; $189BDF |
  db $0F, $30, $30, $26, $0F, $16, $30, $26 ; $189BE7 |
  db $0F, $30, $34, $14, $0F, $04, $34, $14 ; $189BEF |
  db $7C, $76, $38, $39, $36, $25, $10, $0E ; $189BF7 |
  db $A7, $97, $30, $40, $0F, $20, $21, $0F ; $189BFF |
  db $0F, $21, $20, $09, $0F, $16, $20, $06 ; $189C07 |
  db $0F, $20, $37, $0F, $0F, $30, $3C, $11 ; $189C0F |
  db $0F, $16, $26, $27, $0F, $01, $2C, $11 ; $189C17 |
  db $0F, $30, $37, $26, $0F, $30, $15, $11 ; $189C1F |
  db $0F, $37, $21, $10, $0F, $37, $26, $15 ; $189C27 |
  db $0F, $37, $26, $0F, $0F, $20, $21, $11 ; $189C2F |
  db $0F, $20, $37, $29, $0F, $20, $26, $16 ; $189C37 |
  db $0F, $20, $10, $21, $0F, $20, $21, $11 ; $189C3F |
  db $0F, $20, $37, $11, $0F, $20, $10, $0F ; $189C47 |
  db $0F, $20, $37, $0F, $0F, $20, $21, $11 ; $189C4F |
  db $0F, $27, $17, $06, $0F, $27, $17, $21 ; $189C57 |
  db $0F, $20, $10, $21, $04, $02, $04, $FC ; $189C5F |
  db $00, $FF, $97, $ED, $01, $28, $47, $67 ; $189C67 |
  db $01, $C0, $47, $68, $01, $C8            ; $189C6F | (preceding data)
; --- megaman_eye_sprites ($9C75) ---
; Mega Man center portrait eye/face detail sprites. 6 sprites × 2 bytes (tile, attr)
; per grid position. Attribute $03 = palette 3, $43 = palette 3 + H-flip.
; Updates which way Mega Man looks based on cursor position.
; Tiles $E6-$FF, $6F, $80-$81 are CHR sprite tiles for face details.
;
; Position 0 (Spark Man, top-left): eyes look upper-left
  db $F0, $03, $F1, $03, $F2, $03          ; $189C75 |
  db $F3, $03, $F4, $03, $F5, $03          ; $189C7B |
; Position 1 (Snake Man, top-center): eyes look up
  db $F6, $03, $F7, $03, $F6, $43          ; $189C81 |
  db $F8, $03, $F9, $03, $F8, $43          ; $189C87 |
; Position 2 (Needle Man, top-right): eyes look upper-right (pos 0 H-flipped)
  db $F2, $43, $F1, $43, $F0, $43          ; $189C8D |
  db $F5, $43, $F4, $43, $F3, $43          ; $189C93 |
; Position 3 (Hard Man, middle-left): eyes look left
  db $E6, $03, $6F, $03, $E6, $43          ; $189C99 |
  db $FA, $03, $FB, $03, $FC, $03          ; $189C9F |
; Position 4 (center): eyes look forward (straight ahead)
  db $E6, $03, $6F, $03, $E6, $43          ; $189CA5 |
  db $E7, $03, $E8, $03, $E7, $43          ; $189CAB |
; Position 5 (Top Man, middle-right): eyes look right (pos 3 H-flipped lower)
  db $E6, $03, $6F, $03, $E6, $43          ; $189CB1 |
  db $FC, $43, $FB, $43, $FA, $43          ; $189CB7 |
; Position 6 (Gemini Man, bottom-left): eyes look lower-left
  db $E6, $03, $6F, $03, $E6, $43          ; $189CBD |
  db $FD, $03, $FE, $03, $FF, $03          ; $189CC3 |
; Position 7 (Magnet Man, bottom-center): eyes look down
  db $E6, $03, $6F, $03, $E6, $43          ; $189CC9 |
  db $80, $03, $81, $03, $80, $43          ; $189CCF |
; Position 8 (Shadow Man, bottom-right): eyes look lower-right (pos 6 H-flipped)
  db $E6, $03, $6F, $03, $E6, $43          ; $189CD5 |
  db $FF, $43, $FE, $43, $FD, $43          ; $189CDB | (end: $189CDF = $FD, $43)
; --- stage_select_lookup ($9CE1) ---
; Grid index (col + row*3) → stage $22 value. $FF = not selectable.
; Robot Masters (tier $60=0): indices 0-8
; Doc Robots (tier $60=9):   indices 9-17
;   Index: 0    1    2    3    4    5    6    7    8
;   RM:    $06  $05  $00  $03  $FF  $04  $02  $01  $07
;   Boss:  Sprk Snke Ndl  Hard ctr  Top  Gmni Mgnt Shdw
;   Doc:   $0A  $FF  $08  $FF  $FF  $FF  $09  $FF  $0B
  db $06, $05, $00, $03, $FF, $04           ; $189CE1 | RM: Spark/Snake/Needle/Hard/ctr/Top
  db $02, $01, $07                          ; $189CE7 | RM: Gemini/Magnet/Shadow
  db $0A, $FF, $08, $FF, $FF               ; $189CEA | Doc: Spark/$FF/Needle/$FF/$FF
  db $FF, $09, $FF, $0B                    ; $189CEF | Doc: $FF/Gemini/$FF/Shadow
; --- cursor_pos_y ($9CF3) ---
; Y pixel position for cursor base, per grid index (9 entries).
; Row 0=$18(24), Row 1=$58(88), Row 2=$98(152) — matches portrait frame Y positions.
  db $18, $18, $18, $58, $58, $58, $98, $98 ; $189CF3 |
  db $98                                    ; $189CFB |
; --- cursor_pos_x ($9CFC) ---
; X pixel position for cursor base, per grid index (9 entries).
; Col 0=$17(23), Col 1=$67(103), Col 2=$B7(183) — 7px into each frame.
  db $17, $67, $B7, $17, $67, $B7, $17, $67 ; $189CFC |
  db $B7                                    ; $189D04 |
; --- cursor_bolt_offset_y ($9D05) ---
; Y offsets for the 4 corner bolts (indexed 3→0):
;   [0]=$00 top, [1]=$00 top, [2]=$26(38) bottom, [3]=$26(38) bottom
  db $00, $00, $26, $26                     ; $189D05 |
; --- cursor_bolt_offset_x ($9D09) ---
; X offsets for the 4 corner bolts (indexed 3→0):
;   [0]=$00 left, [1]=$2A(42) right, [2]=$00 left, [3]=$2A(42) right
; Bolt corners: TL(0,0) TR(42,0) BL(0,38) BR(42,38)
  db $00, $2A, $00, $2A                    ; $189D09 |
; --- cursor_direction_offsets ($9D0D) ---
; Indexed by button bits: $01=Right, $02=Left, $04=Down, $08=Up
  db $00, $01                               ; $189D0D |
  db $FF, $00, $03, $00, $00, $00, $FD, $0F ; $189D0F |
  db $20, $26, $0F, $0F, $0F, $0F, $0F, $0F ; $189D17 |
  db $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F ; $189D1F |
  db $30, $3C, $11, $0F, $16, $26, $27, $0F ; $189D27 |
  db $01, $2C, $11, $0F, $30, $37, $26, $0F ; $189D2F |
  db $20, $21, $11, $0F, $37, $17, $15, $0F ; $189D37 |
  db $20, $15, $05, $0F, $20, $10, $21, $7C ; $189D3F |
  db $7E, $38, $39, $36, $25               ; $189D47 | CHR bank/tile data
; --- portrait_addr_lo ($9D4C) ---
; PPU nametable address low bytes for portrait frame positions (9 entries).
; Repeats per column: $62(col2)/$6C(col12)/$76(col22).
; Combined with $9D55 high bytes, pixel positions:
;   (16,24) (96,24) (176,24) — row 0
;   (16,88) (96,88) (176,88) — row 1
;   (16,152)(96,152)(176,152)— row 2
  db $62, $6C, $76                          ; $189D4C | row 0: Spark/Snake/Needle
  db $62, $6C, $76                          ; $189D4F | row 1: Hard/center/Top
  db $62, $6C, $76                          ; $189D52 | row 2: Gemini/Magnet/Shadow
; --- portrait_addr_hi ($9D55) ---
; PPU nametable address high bytes (9 entries).
; Repeats per row: $20(row3)/$21(row11)/$22(row19).
  db $20, $20, $20                          ; $189D55 | row 0 ($20xx = tile row 3)
  db $21, $21, $21                          ; $189D58 | row 1 ($21xx = tile row 11)
  db $22, $22, $22                          ; $189D5B | row 2 ($22xx = tile row 19)
; --- portrait_frame_tiles ($9D5E) ---
; Portrait frame tile layout. Groups of: [Y-offset, X-offset, count-1, tile IDs...]
; $FF = end marker. Y/X offsets are relative to portrait base nametable address.
; Frame is 8 tiles wide × 6 tiles tall (64×48 px).
;
; Group format in nametable offset terms:
;   Row 0 (+$00): top border    — 8 tiles: $45 $E0 $E1 $E2 $E2 $E3 $E4 $4B
;   Row 1 (+$21): frame body    — 6 tiles: $D5 $24 $24 $24 $24 $D6
;   Row 2 (+$41): frame body    — 6 tiles: $E5 $24 $24 $24 $24 $E6
;   Row 3 (+$61): frame body    — 6 tiles: $E5 $24 $24 $24 $24 $E6
;   Row 4 (+$81): frame body    — 6 tiles: $F5 $24 $24 $24 $24 $F6
;   Row 5 (+$A0): bottom border — 8 tiles: $55 $F0 $F1 $F2 $F2 $F3 $F4 $5B
;   $24 = empty interior tile (face tiles written separately by write_portrait_faces)
  db $00, $00, $07, $45, $E0, $E1, $E2, $E2 ; $189D5E | row 0: top border
  db $E3, $E4, $4B                          ; $189D66 |
  db $00, $21, $05, $D5, $24, $24, $24, $24 ; $189D69 | row 1: L border + interior + R border
  db $D6                                    ; $189D71 |
  db $00, $41, $05, $E5, $24, $24, $24, $24 ; $189D72 | row 2
  db $E6                                    ; $189D7A |
  db $00, $61, $05, $E5, $24, $24, $24, $24 ; $189D7B | row 3
  db $E6                                    ; $189D83 |
  db $00, $81, $05, $F5, $24, $24, $24, $24 ; $189D84 | row 4
  db $F6                                    ; $189D8C |
  db $00, $A0, $07, $55, $F0, $F1, $F2, $F2 ; $189D8D | row 5: bottom border
  db $F3, $F4, $5B                          ; $189D95 |
  db $FF                                    ; $189D98 | end marker
; --- face_tiles_row0 ($9D99) ---
; Portrait face tile IDs — 4×4 grid written by write_portrait_faces.
; Same tile IDs for ALL portraits; CHR bank selects which boss face appears.
  db $C8, $C9, $CA, $CB                    ; $189D99 | face row 0
  db $D8, $D9, $DA, $DB                    ; $189D9D | face row 1
  db $E8, $E9, $EA, $EB                    ; $189DA1 | face row 2
  db $F8, $F9, $FA, $FB                    ; $189DA5 | face row 3
; --- face_attr_offsets ($9DA9) ---
; Attribute table offsets for portrait palette (OR'd with $23C0 base).
  db $09, $00, $0E, $00, $00, $00          ; $189DA9 |
  db $29, $00, $2E                          ; $189DAF | (attr offsets continued)
; --- center_portrait_data ($9DB2) ---
; Mega Man center portrait. PPU addr $218E = tile (14,12) = pixel (112,96).
; Uses different face tiles ($CC-$FF) than boss portraits ($C8-$FB).
  db $21                                    ; $189DB2 | PPU addr high
  db $8E                                    ; $189DB3 | PPU addr low
  db $CC, $CD, $CE, $CF                    ; $189DB4 | center face row 0
  db $DC, $DD, $DE, $DF                    ; $189DB8 | center face row 1
  db $EC, $ED, $EE, $EF                    ; $189DBC | center face row 2
  db $FC, $FD, $FE, $FF                    ; $189DC0 | center face row 3
; --- center_attr_data ($9DC4) ---
; Attribute table write for center portrait palette.
  db $23, $DB, $01, $88, $22               ; $189DC4 | $23DB: attr addr, 2 bytes: $88,$22
; --- face_addr_hi ($9DC9) ---
; PPU addr high bytes for face tile writes (9 entries). Same as $9D55.
  db $20, $20, $20, $21, $21, $21          ; $189DC9 | rows 0/1/2
  db $22, $22, $22                          ; $189DCF |
; --- face_addr_lo ($9DD2) ---
; PPU addr low bytes for face positions (9 entries).
; Col 0=$84(tile4), Col 1=$8E(tile14), Col 2=$98(tile24).
; Face pixel positions (inside frame, 2 tiles in from border):
;   (32,32) (112,32) (192,32) — row 0
;   (32,96) (112,96) (192,96) — row 1
;   (32,160)(112,160)(192,160)— row 2
  db $84, $8E, $98                          ; $189DD2 | row 0: Spark/Snake/Needle
  db $84, $8E, $98                          ; $189DD5 | row 1: Hard/center/Top
  db $84, $8E, $98                          ; $189DD8 | row 2: Gemini/Magnet/Shadow
; --- portrait_beat_oam_offsets ($9DDB) ---
  db $78, $54, $10, $28                    ; $189DDB |
  db $98, $40, $18, $64, $00, $07, $03, $01 ; $189DDF |
  db $05, $08, $04, $03, $04, $03, $40, $20 ; $189DE7 |
  db $01, $08, $00, $10, $04, $02, $80, $63 ; $189DEF |
  db $83, $02, $7E, $6B, $82, $03, $76, $6B ; $189DF7 |
  db $84, $02, $7E, $6B, $85, $02, $86, $6B ; $189DFF |
  db $86, $01, $8E, $6B, $87, $01, $96, $73 ; $189E07 |
  db $88, $02, $86, $73, $89, $01, $8E, $73 ; $189E0F |
  db $8A, $01, $96, $0F, $30, $15, $11, $0F ; $189E17 |
  db $0F, $27, $17, $0F, $10, $27, $17, $0F ; $189E1F |
  db $37, $3C, $0F, $0F, $37, $27, $06, $0F ; $189E27 |
  db $07, $08, $09, $0F, $39, $29, $19, $0F ; $189E2F |
  db $21, $08, $30, $0F, $0F, $2C, $11, $0F ; $189E37 |
  db $0F, $30, $37, $0F, $0F, $10, $15, $0F ; $189E3F |
  db $0F, $00, $00, $20, $40, $00, $00, $20 ; $189E47 |
  db $00, $81, $00, $00, $10, $20, $10, $00 ; $189E4F |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189E57 |
  db $00, $00, $00, $40, $00, $00, $00, $00 ; $189E5F |
  db $00, $00, $01, $00, $00, $00, $00, $00 ; $189E67 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189E6F |
  db $00, $00, $00, $00, $00, $02, $00, $00 ; $189E77 |
  db $00, $00, $04, $00, $40, $00, $00, $00 ; $189E7F |
  db $00, $20, $04, $80, $00, $00, $00, $00 ; $189E87 |
  db $00, $04, $00, $42, $01, $00, $00, $40 ; $189E8F |
  db $00, $02, $00, $00, $00, $00, $00, $80 ; $189E97 |
  db $00, $02, $05, $00, $00, $00, $00, $40 ; $189E9F |
  db $00, $00, $10, $80, $04, $00, $00, $00 ; $189EA7 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189EAF |
  db $00, $00, $10, $00, $00, $00, $00, $00 ; $189EB7 |
  db $00, $40, $10, $01, $48, $40, $04, $00 ; $189EBF |
  db $00, $40, $10, $01, $00, $00, $00, $04 ; $189EC7 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189ECF |
  db $00, $00, $00, $01, $00, $00, $10, $00 ; $189ED7 |
  db $00, $30, $00, $20, $00, $04, $00, $00 ; $189EDF |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189EE7 |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189EEF |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189EF7 |
  db $01, $40, $00, $01, $00, $00, $00, $01 ; $189EFF |
  db $00, $80, $00, $00, $00, $02, $04, $00 ; $189F07 |
  db $00, $00, $00, $08, $00, $01, $00, $00 ; $189F0F |
  db $01, $04, $00, $0A, $00, $00, $01, $20 ; $189F17 |
  db $00, $20, $00, $00, $00, $00, $00, $01 ; $189F1F |
  db $00, $00, $10, $00, $00, $00, $00, $00 ; $189F27 |
  db $04, $10, $00, $10, $00, $00, $00, $00 ; $189F2F |
  db $00, $00, $00, $00, $00, $10, $40, $81 ; $189F37 |
  db $00, $10, $40, $00, $00, $00, $10, $00 ; $189F3F |
  db $00, $10, $00, $00, $00, $00, $00, $04 ; $189F47 |
  db $00, $01, $00, $00, $00, $08, $10, $00 ; $189F4F |
  db $00, $00, $04, $10, $00, $00, $00, $00 ; $189F57 |
  db $00, $0C, $00, $20, $00, $00, $00, $02 ; $189F5F |
  db $10, $00, $00, $22, $00, $00, $00, $00 ; $189F67 |
  db $00, $00, $00, $00, $00, $08, $00, $01 ; $189F6F |
  db $00, $00, $00, $00, $00, $00, $00, $10 ; $189F77 |
  db $00, $20, $01, $00, $00, $50, $00, $01 ; $189F7F |
  db $00, $80, $00, $00, $04, $08, $00, $08 ; $189F87 |
  db $10, $00, $00, $08, $00, $00, $00, $00 ; $189F8F |
  db $04, $02, $00, $00, $00, $80, $00, $00 ; $189F97 |
  db $00, $00, $00, $1C, $00, $00, $05, $00 ; $189F9F |
  db $00, $00, $00, $C4, $00, $00, $00, $00 ; $189FA7 |
  db $00, $02, $00, $00, $00, $00, $00, $00 ; $189FAF |
  db $00, $00, $00, $00, $00, $00, $10, $20 ; $189FB7 |
  db $00, $00, $04, $05, $00, $00, $00, $40 ; $189FBF |
  db $00, $00, $00, $00, $00, $00, $40, $00 ; $189FC7 |
  db $01, $00, $00, $00, $00, $00, $00, $00 ; $189FCF |
  db $00, $00, $00, $00, $00, $20, $00, $00 ; $189FD7 |
  db $00, $00, $00, $02, $00, $04, $00, $00 ; $189FDF |
  db $00, $00, $00, $00, $00, $00, $00, $00 ; $189FE7 |
  db $00, $00, $40, $00, $00, $00, $40, $00 ; $189FEF |
  db $00, $00, $00, $20, $00, $00, $00, $49 ; $189FF7 |
  db $F1                                    ; $189FFF |

